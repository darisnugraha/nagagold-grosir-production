(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[184],{1251:function(e,t,a){"use strict";a.r(t);var n=a(52),o=a(53),r=a(54),l=a(55),s=a(0),i=a.n(s),c=a(33),m=a(3),d=a(20),p=a(5),h=a(56),g=a(1),b=a(440),u=a(441),v=a(51),E=a(147),S=a(23),f=a(48),O=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={type_laporan:"SIMPLE"},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(E.e)()),this.props.dispatch(Object(v.o)())}},{key:"render",value:function(){switch(this.props.from){case"PROSES":return i.a.createElement("form",{onSubmit:this.props.handleSubmit},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(b.a,{label:"Tanggal",name:"tanggal",type:"date",component:f.b})),i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(b.a,{className:"form-control",name:"nama_toko",label:"Nama Toko",component:f.c,options:this.props.listCustomer.map((function(e){return{value:e.kode_customer,name:e.nama_toko}}))})),i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(b.a,{className:"form-control",name:"status",label:"Status Reparasi",component:f.c,options:[{value:"PROSES",name:"PROSES"},{value:"SELESAI",name:"SELESAI"},{value:"SERAH",name:"SERAH"}]})))),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.props.onSend},this.props.onSend?i.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):i.a.createElement("i",{className:"fa fa-print mr-2"}),"Print"))))}}}]),a}(s.Component);O=Object(u.a)({form:"FormReparasi",enableReinitialize:!0})(O);var N=Object(c.b)((function(e){return{listBank:e.rekeningState.listRekening||[],onSend:e.provinsi.onSend,listCustomer:e.customerState.listCustomer||[],initialValues:{tanggal:Object(S.b)()}}}))(O),y=a(86),k=(a(185),function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",n=new y.default("portrait"),o=[],r=45;n.setFontSize(15),n.text("LAPORAN REPARASI "+a,14,33),n.addImage(g.kb,"PNG",14,10,35,12),n.setFontSize(10),t.forEach((function(e,t){var a=[[{content:"Nomor Bon : "+e.no_bon,colSpan:5}],[{content:"Tanggal Transaksi : "+e.tanggal,colSpan:5}],[{content:"KODE KATEGORI"},{content:"QTY",styles:{halign:"right"}},{content:"BRUTO (GR)",styles:{halign:"right"}},{content:"ONGKOS REPARASI (RP)",styles:{halign:"right"}},{content:"TOTAL ONGKOS REPARASI (RP)",styles:{halign:"right"}}]],l=0,s=0,i=0;e.detail_barang.forEach((function(e){var t=[e.kode_kategori,{content:e.qty,styles:{halign:"right"}},{content:Object(g.D)(e.bruto),styles:{halign:"right"}},{content:Object(g.G)(e.ongkos_rp),styles:{halign:"right"}},{content:Object(g.G)(parseFloat(e.ongkos_rp)*parseInt(e.qty)),styles:{halign:"right"}}];o.push(t),l=parseInt(l)+parseInt(e.qty),s=parseFloat(s)+parseFloat(e.bruto),i=parseInt(i)+parseFloat(e.ongkos_rp)*parseInt(e.qty)}));var c=[["Grand Total",{content:l,styles:{halign:"right"}},{content:Object(g.D)(s),styles:{halign:"right"}},{content:"",styles:{halign:"right"}},{content:Object(g.G)(i),styles:{halign:"right"}}]];n.autoTable({head:a,body:o,foot:c,startY:r,theme:"plain",rowPageBreak:"avoid",margin:{top:20},bodyStyles:{lineColor:"#969696",fontSize:8,lineWidth:.05},headStyles:{lineColor:"#969696",lineWidth:.05,fontSize:8,fillColor:"#E8E8E8"},footStyles:{lineColor:"#969696",lineWidth:.05,fillColor:"#E8E8E8",fontSize:8}}),r=n.lastAutoTable.finalY+10,o=[]})),o=[],n.text("Dicetak Oleh\t: ".concat(Object(g.P)()),14,r+10),n.text("Cetak\tDate : ".concat(e),14,r+16);var l=n.internal.getNumberOfPages(),s=n.internal.pageSize.width,i=n.internal.pageSize.height;n.setFontSize(10);for(var c=1;c<l+1;c++){var m=s/2,d=i-10;n.setPage(c),n.text("".concat(c," of ").concat(l),m,d,{align:"center"})}n.autoPrint(),n.setProperties({title:"LAPORAN REPARASI "+a});var p=n.output("datauristring"),h=window.open();h.document.open(),h.document.write("<html><head><title>LAPORAN REPARASI</title></head><body style='margin:0 !important'><embed width='100%' height='100%'  src="+p+"></embed></body></html>")}),R=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={},o}return Object(o.a)(a,[{key:"handleProses",value:function(e){var t=this;this.props.dispatch(Object(m.w)());var a=e.status,n=e.nama_toko,o=e.tanggal;Object(p.b)("report/reparasi/".concat(o,"&").concat(n,"&").concat(a)).then((function(e){t.props.dispatch(Object(m.m)()),Object(g.u)(e.data)&&k(localStorage.getItem("username"),Object(h.b)(),localStorage.getItem("username"),e.data,a)})).catch((function(e){return Object(d.c)("Gagal Mengambil data, Mohon periksa koneksi anda").then((function(){return t.props.dispatch(Object(m.m)())}))}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-12 col-md-12"},i.a.createElement("ul",{className:"nav nav-tabs nav-justified nav-bordered mb-3"},i.a.createElement("li",{className:"nav-item"},i.a.createElement("a",{href:"#proses-tab","data-toggle":"tab","aria-expanded":"false",className:"nav-link active"},i.a.createElement("i",{className:"mdi mdi-home-variant d-lg-none d-block mr-1"}),i.a.createElement("span",{className:"d-none d-lg-block"},"Laporan Reparasi")))),i.a.createElement("div",{className:"tab-content"},i.a.createElement("div",{className:"tab-pane show active",id:"proses-tab"},i.a.createElement(N,{from:"PROSES",onSubmit:function(t){return e.handleProses(t)}})))))))))}}]),a}(s.Component);t.default=Object(c.b)()(R)}}]);