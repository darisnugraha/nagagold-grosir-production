(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[55],{1221:function(e,a,t){"use strict";t.r(a);var n=t(52),r=t(53),o=t(54),l=t(55),s=t(0),c=t.n(s),i=t(33),m=t(4),u=t(440),d=t(441),p=t(460),b=t(304),g=t(48),k=t(96),h=t.n(k),j=t(76),f=t(1),v=t(5),E=t(15),O=t.n(E),_=t(61),y=t(77),N=t(20),S=t(3),P=t(10),B=t(308),T=t(793),K=t(183),G=t(312),x=t(804),F=t(796),R=Object(b.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),w=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).handleBarcode=function(){return function(e){clearTimeout(r.delay),r.delay=setTimeout((function(){var a=e.target.value;if(14===a.length)return Object(v.b)("barang-set/get-by-kode-barcode-set-active/"+a).then((function(e){e.data.detail_barang.forEach((function(a){r.handleBarcodeSet(a,e.data.kode_barcode_set)}))})),!0;var t=a.split("X");r.props.change("kodeBarang",t[0]),r.setState({kodeJenis:t[0],kadarCetak:t[1],kadarJual:t[2]})}),1500)}},r.state={kodeBarang:[],no_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none",isBarangToko:!0},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){Object(f.qb)(),this.props.dispatch(Object(j.k)()),Object(T.c)(this.props.change),this.props.dispatch(Object(G.c)())}},{key:"componentWillUnmount",value:function(){Object(T.a)()}},{key:"onclick1",value:function(){this.props.change("netto",this.props.netto),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross),this.props.change("discGlobalGr",this.props.discGlobalGr),this.props.change("nettoDiscGlobalExt",Object(f.D)(Object(f.xb)(this.props.netto)-Object(f.xb)(this.props.discGlobalGr)))}},{key:"pilihBarang",value:function(e){var a=e,t=this.props.KodeBarangList.filter((function(e){return e.kode_jenis===a}));this.setState({kodeJenis:t[0].kode_jenis,namaJenis:t[0].nama_jenis,kadarCetak:t[0].kadar_cetak,kadarJual:t[0].kadar_jual,kodeKategori:t[0].kode_kategori,namaKategori:t[0].nama_kategori,harga_jual:0}),this.props.change("keterangan",t[0].nama_jenis),this.props.change("kadar",t[0].kadar_cetak),this.props.change("kadarTransaksi",t[0].kadar_jual),this.props.change("initKadarTransaksi",t[0].kadar_jual),this.props.change("kodeKategori",t[0].kode_kategori),this.props.change("namaKategori",t[0].nama_kategori),this.props.change("harga_jual",0),Object(f.zb)("Plastik")}},{key:"setBruto",value:function(){this.props.change("bruto",localStorage.getItem("Timbangan"))}},{key:"handleBarcodeSet",value:function(e,a){var t=this,n=e.kode_jenis,r=this.props.KodeBarangList.filter((function(e){return e.kode_jenis===n}));Object(v.b)("jenis/get/by-kode-jenis/".concat(e.kode_jenis)).then((function(n){var o={netto_disc:Object(f.b)(e.netto_disc||0),gross:Object(f.b)(e.gross||0),netto:Object(f.b)(e.netto||0),qty:1,k:Object(f.b)(e.k||0),ongkos_rp:Object(f.b)(e.ongkos_rp||0),kadar_cetak:(r[0].kadar_cetak||0).toString(),disc_persen:e.disc_persen||0,kadar_jual:Object(f.b)(e.kadar_jual||0),kadar_level2:n.data.level2,kadar_level3:n.data.level3,kadar_modal:r[0].kadar_beli,kode_jenis:r[0].kode_jenis,kode_barcode:"-",kode_barcode_set:a,p:Object(f.b)(e.p||0),disc:e.disc||0,pkg:Object(f.b)(e.pkg||0),bruto:Object(f.b)(e.bruto||0)},l=Object(f.q)({data:e,hasil:r,res:n,kode_barcode_set:a}),s=Object(f.r)({data:e,res:n,hasil:r,kode_barcode_set:a}),c=JSON.parse(localStorage.getItem("transaksiPenjualan"))||[],i=JSON.parse(localStorage.getItem("transaksiPenjualan_level2"))||[],u=JSON.parse(localStorage.getItem("transaksiPenjualan_level3"))||[];c.push(o),i.push(l),u.push(s);var d=c.map((function(e){return parseFloat(e.netto_disc)})).reduce((function(e,a){return e+a}),0);localStorage.setItem("GrandTotalNetto",d),localStorage.setItem("transaksiPenjualan",JSON.stringify(c)),localStorage.setItem("transaksiPenjualan_level2",JSON.stringify(i)),localStorage.setItem("transaksiPenjualan_level3",JSON.stringify(u)),O.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),t.props.dispatch(Object(_.k)()),t.props.dispatch(Object(y.i)()),t.props.dispatch(Object(m.b)("FormTransaksiReturnPenjualanEdit")),t.props.dispatch(Object(P.g)()),t.props.dispatch(Object(S.q)("transaksiPenjualan")),t.setState({discGlobalGr:Object(f.xb)(0)/100*Object(f.xb)(localStorage.getItem("GrandTotalNetto")),discGlobalPr:0,GrandTotalNetto:parseFloat(localStorage.getItem("GrandTotalNetto")).toFixed(3)})})).catch((function(e){return Object(N.c)("Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu")}))}},{key:"render",value:function(){var e=this;return c.a.createElement(K.a,{onSubmit:this.props.handleSubmit},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{"data-for":"refresh",className:"btn btn-circle btn-primary",type:"button","data-tip":!0,onClick:function(){return e.props.dispatch(Object(m.b)("FormTransaksiReturnPenjualanEdit"))}},c.a.createElement("i",{className:"fa fa-retweet","aria-hidden":"true"}),c.a.createElement(B.a,{id:"refresh",type:"dark",effect:"solid"},c.a.createElement("span",null,"Refresh"))))),c.a.createElement("div",{className:"col-md-12 col-lg-12 d-none"},c.a.createElement(u.a,{name:"noFaktur",label:this.props.noFaktur,type:"text",readOnly:!0,component:g.b,defaultValue:this.props.noFaktur,normalize:function(e){return e&&e.toUpperCase()}})),c.a.createElement("div",{className:this.state.isBarangToko?"col-md-4 form-group":"col-md-4 form-group d-none"},""!==String(this.props.KodeBarangList)?c.a.createElement(u.a,{name:"kodeBarang",label:"Kode Model",component:g.c,className:"form-control",onChange:function(a){return e.pilihBarang(a.value)},options:this.props.KodeBarangList.filter((function(e){return"PERHIASAN"===e.kode_kelompok||"AKSESORIS"===e.kode_kelompok})).map((function(e){return{value:e.kode_jenis,name:e.nama_jenis}}))}):c.a.createElement(h.a,{width:"100%",height:50})),c.a.createElement("div",{className:"col-lg-12 row"!==this.state.no_aksesoris?"col-md-3 col-lg-3 d-none":this.state.isBarangToko?"col-md-3 col-lg-3":"col-md-3 col-lg-3 d-none"},c.a.createElement(u.a,{name:"kode_barocde",label:"Kode Barcode",type:"text",component:g.b,placeholder:"Biarkan Kosong jika Tidak Digunakan",normalize:function(e){return e&&e.toUpperCase()},onChange:this.handleBarcode()})),c.a.createElement("div",{className:(this.state.no_aksesoris,"col-md-2 col-lg-2 d-none")},c.a.createElement(u.a,{name:"kadar",label:"Kadar Jual",type:"number",component:g.b})),c.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},c.a.createElement(u.a,{name:"kodeKategori",label:"Kadar Jual",type:"number",component:g.b})),c.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},c.a.createElement(u.a,{name:"no_urut",label:"Nomor Urut",type:"number",component:g.b})),c.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},c.a.createElement(u.a,{name:"namaKategori",label:"Kadar Jual",type:"number",component:g.b})),c.a.createElement("div",{className:this.state.no_aksesoris},c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(u.a,{name:"p",label:"Plastik",type:"number",component:g.b,normalize:f.c})),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(u.a,{name:"k",label:"Kertas",type:"number",component:g.b,normalize:f.c})),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(u.a,{name:"pkg",label:"Pkg (Gr)",type:"number",component:g.b,onBlur:this.onclick1(),normalize:f.g})),c.a.createElement(F.a,null),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(u.a,{name:"bruto",label:"Berat (Gr)",type:"number",component:g.b,onChange:this.onclick1(),normalize:f.g})),c.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},c.a.createElement(u.a,{name:"kadarTransaksi",label:"Kadar Jual",type:"number",component:g.b,onBlur:function(){return e.onclick1()},readOnly:Object(f.z)()})),c.a.createElement("div",{className:"col-md-3 form-group"},c.a.createElement(u.a,{name:"initKadarTransaksi",label:"Kadar Jual",type:"number",component:g.b,readOnly:Object(f.z)()})),c.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},c.a.createElement(u.a,{name:"netto",label:"Netto (Gr)",type:"text",component:g.b,readOnly:!0})),c.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},c.a.createElement(u.a,{name:"gross",label:"Gross (Gr)",type:"text",component:g.b,readOnly:!0})),c.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},c.a.createElement(u.a,{name:"discGlobalPr",label:"Diskon (%)",type:"number",component:g.b,onBlur:function(){return e.onclick1()}})),c.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},c.a.createElement(u.a,{name:"discGlobalGr",label:"Diskon (Gr)",type:"text",component:g.b,readOnly:!0})),c.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},c.a.createElement(u.a,{name:"nettoDiscGlobalExt",label:"Netto - Diskon (Gr)",type:"text",component:g.b,readOnly:!0})),c.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},c.a.createElement("label",{htmlFor:""},"Ongkos (Rp)"),c.a.createElement(u.a,Object.assign({name:"rp",component:"input",type:"tel",className:"form-control"},R)))),c.a.createElement("div",{className:this.state.aksesoris},c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(u.a,{name:"qty",label:"Qty",type:"number",component:g.b})),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement("label",{htmlFor:""},"Harga Jual"),c.a.createElement(u.a,Object.assign({name:"harga_jual",component:"input",type:"tel",className:"form-control"},R))))),c.a.createElement("div",{className:"col-md-12 form-group mt-3"},c.a.createElement(x.a,{kadar:this.props.kadar,prevKadar:this.props.prevKadar,statusAuth:this.props.statusAuth,handleOtorisasi:function(){return e.props.dispatch(Object(G.b)())}})))}}]),t}(s.Component);w=Object(d.a)({form:"FormTransaksiReturnPenjualanEdit",enableReinitialize:!0})(w);var D=Object(p.a)("FormTransaksiReturnPenjualanEdit");a.default=Object(i.b)((function(e){var a=D(e,"bruto","kadarTransaksi","pkg","discGlobalPr","initKadarTransaksi"),t=a.bruto,n=a.kadarTransaksi,r=a.pkg,o=a.discGlobalPr,l=a.initKadarTransaksi;return{netto:Object(f.D)(parseFloat(Object(f.xb)(t)||0)*(parseFloat(Object(f.xb)(n)||0)/100)),gross:Object(f.D)(parseFloat(Object(f.xb)(t)||0)+parseFloat(Object(f.xb)(r)||0)),discGlobalGr:Object(f.D)(parseFloat(Object(f.xb)(t)||0)*(parseFloat(Object(f.xb)(o)||0)/100)),KodeBarangList:e.kodeBarangState.listKodeBarang||[],kadar:n,prevKadar:l,statusAuth:e.authorizationState.statusAuthorization,initialValues:{kodeBarang:Object(f.Ab)({value:"nama_jenis",keyTarget:"kode_jenis",source:e.kodeBarangState.listKodeBarang,target:e.returPenjualanState.editReturPenjualan.kode_jenis}),keterangan:e.returPenjualanState.editReturPenjualan.keterangan,kadar:e.returPenjualanState.editReturPenjualan.kadar_cetak,no_urut:e.returPenjualanState.editReturPenjualan.no_urut,p:e.returPenjualanState.editReturPenjualan.plastik,k:e.returPenjualanState.editReturPenjualan.kulit,qty:e.returPenjualanState.editReturPenjualan.qty,pkg:e.returPenjualanState.editReturPenjualan.pkg,bruto:Object(f.b)(e.returPenjualanState.editReturPenjualan.bruto),discGlobalPr:e.returPenjualanState.editReturPenjualan.disc_persen,kadarTransaksi:e.returPenjualanState.editReturPenjualan.kadar_jual,initKadarTransaksi:e.returPenjualanState.editReturPenjualan.kadar_jual,gross:e.returPenjualanState.editReturPenjualan.gross,netto:e.returPenjualanState.editReturPenjualan.netto,ongkos_rp:e.returPenjualanState.editReturPenjualan.ongkos_rp}}}))(w)},793:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return c})),t.d(a,"a",(function(){return i}));var n=t(187),r=t(802),o=localStorage.getItem("namaTimbangan"),l=localStorage.getItem("enableTimbangan"),s=function(e){l&&n.a.database().ref(o).on("value",(function(a){var t=a.val();e("bruto",t.nilai)}))},c=function(e){var a=Object(r.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));a.on("connect",(function(){console.log("SOCKET CONNECTED : ",a.connected)}));var t=localStorage.getItem("username");a.on("timbangan-emit",(function(a){var n;(null===(n=a.user_id)||void 0===n?void 0:n.toLowerCase())===(null===t||void 0===t?void 0:t.toLowerCase())&&(localStorage.setItem("timbangan-active","true"),e(document.activeElement.name,a.value))}))},i=function(){var e=Object(r.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));localStorage.setItem("timbangan-active","false"),e.disconnect()}},796:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(440),l=t(1),s=t(48);a.a=function(e){var a,t,n;return r.a.createElement("div",{className:Object(l.Db)()?"col-md-".concat(null!==(a=e.width)&&void 0!==a?a:3," form-group"):"col-md-".concat(null!==(t=e.width)&&void 0!==t?t:3," form-group d-none")},r.a.createElement(o.a,{name:null!==(n=e.name)&&void 0!==n?n:"qty",label:"Quantity",type:"number",normalize:l.e,component:s.b}))}},804:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(440),l=t(441),s=t(184),c=t(1),i=t(48);a.a=Object(l.a)({form:"authorizationForm"})((function(e){return Object(c.Cb)()?e.isUpperThan?e.kadar>e.prevKadar?e.statusAuth?r.a.createElement(s.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("div",{className:"col-lg-12 row justify-content-end"},r.a.createElement("div",{className:"col-md-3 form-group"},r.a.createElement(o.a,{name:"user_id",label:"User ID",type:"text",component:i.b})),r.a.createElement("div",{className:"col-md-3 form-group"},r.a.createElement(o.a,{name:"password",label:"Password",type:"password",component:i.b})),r.a.createElement("div",{className:"col-md-3 form-group"},r.a.createElement("label",{htmlFor:""},"\xa0"),r.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return e.handleOtorisasi()}},"Otorisasi")))):r.a.createElement(s.a,null):e.kadar<e.prevKadar?e.statusAuth?r.a.createElement(s.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("div",{className:"col-lg-12 row justify-content-end"},r.a.createElement("div",{className:"col-md-3 form-group"},r.a.createElement(o.a,{name:"user_id",label:"User ID",type:"text",component:i.b})),r.a.createElement("div",{className:"col-md-3 form-group"},r.a.createElement(o.a,{name:"password",label:"Password",type:"password",component:i.b})),r.a.createElement("div",{className:"col-md-3 form-group"},r.a.createElement("label",{htmlFor:""},"\xa0"),r.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return e.handleOtorisasi()}},"Otorisasi")))):r.a.createElement(s.a,null):r.a.createElement(s.a,null)}))}}]);