(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[38],{1220:function(e,a,t){"use strict";t.r(a);var r=t(52),o=t(53),n=t(54),l=t(55),s=t(0),i=t.n(s),c=t(33),m=t(4),d=t(440),p=t(441),u=t(460),b=t(304),g=t(48),k=t(96),h=t.n(k),f=t(76),F=t(1),v=t(5),E=t(15),j=t.n(E),O=t(61),N=t(77),x=t(20),G=t(3),_=t(10),y=t(308),K=t(793),P=t(183),S=t(804),T=t(312),B=t(795),W=t(796),I=Object(b.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),w=function(e){Object(n.a)(t,e);var a=Object(l.a)(t);function t(e){var o;return Object(r.a)(this,t),(o=a.call(this,e)).handleBarcode=function(){return function(e){clearTimeout(o.delay),o.delay=setTimeout((function(){var a=e.target.value;if(14===a.length)return Object(v.b)("barang-set/get-by-kode-barcode-set-active/"+a).then((function(e){e.data.detail_barang.forEach((function(a){o.handleBarcodeSet(a,e.data.kode_barcode_set)}))})),!0;var t=a.split("X");o.props.change("kodeBarang",t[0]),o.setState({kodeJenis:t[0],kadarCetak:t[1],kadarJual:t[2]})}),1500)}},o.handleCheck=function(e){var a=e.target.value;clearTimeout(o.timer),o.timer=setTimeout((function(){var e=Object(B.a)(a);e&&(o.props.change("bruto",(e.GW-e.PKG).toFixed(3)),o.props.change("pkg",e.PKG),o.props.change("netto",o.props.netto),Object(F.R)()&&o.props.dispatch(Object(N.l)()))}),100)},o.state={kodeBarang:[],no_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none",isBarangToko:!0},o}return Object(o.a)(t,[{key:"componentDidMount",value:function(){Object(F.qb)(),this.props.dispatch(Object(f.k)()),Object(K.c)(this.props.change),this.props.dispatch(Object(T.c)())}},{key:"componentWillUnmount",value:function(){Object(K.a)()}},{key:"onclick1",value:function(){this.props.change("netto",this.props.netto),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross),this.props.change("discGlobalGr",this.props.discGlobalGr),console.log(this.props.discGlobalGr,this.props.netto),this.props.change("nettoDiscGlobalExt",Object(F.D)(parseFloat(Object(F.xb)(this.props.netto))-parseFloat(Object(F.xb)(this.props.discGlobalGr))))}},{key:"pilihBarang",value:function(e){var a=e,t=this.props.KodeBarangList.filter((function(e){return e.kode_jenis===a}));this.setState({kodeJenis:t[0].kode_jenis,namaJenis:t[0].nama_jenis,kadarCetak:t[0].kadar_cetak,kadarJual:t[0].kadar_jual,kodeKategori:t[0].kode_kategori,namaKategori:t[0].nama_kategori,harga_jual:0}),this.props.change("keterangan",t[0].nama_jenis),this.props.change("kadar",t[0].kadar_cetak),this.props.change("kadarTransaksi",t[0].kadar_jual),this.props.change("initKadarTransaksi",t[0].kadar_jual),this.props.change("kodeKategori",t[0].kode_kategori),this.props.change("namaKategori",t[0].nama_kategori),this.props.change("harga_jual",0),Object(F.zb)(Object(F.R)()?"Kode Barcode":"Plastik")}},{key:"setBruto",value:function(){this.props.change("bruto",localStorage.getItem("Timbangan"))}},{key:"handleBarcodeSet",value:function(e,a){var t=this,r=e.kode_jenis,o=this.props.KodeBarangList.filter((function(e){return e.kode_jenis===r}));Object(v.b)("jenis/get/by-kode-jenis/".concat(e.kode_jenis)).then((function(r){var n={netto_disc:parseFloat(e.netto_disc||0).toFixed(3),gross:parseFloat(e.gross||0).toFixed(3),netto:parseFloat(e.netto||0).toFixed(3),qty:1,k:parseFloat(e.k||0),ongkos_rp:parseFloat(e.ongkos_rp||0),kadar_cetak:(o[0].kadar_cetak||0).toString(),disc_persen:e.disc_persen||0,kadar_jual:parseFloat(e.kadar_jual||0),kadar_level2:r.data.level2,kadar_level3:r.data.level3,kadar_modal:o[0].kadar_beli,kode_jenis:o[0].kode_jenis,kode_barcode:"-",kode_barcode_set:a,p:parseFloat(e.p||0),disc:e.disc||0,pkg:parseFloat(e.pkg||0),bruto:parseFloat(e.bruto||0).toFixed(3)},l=Object(F.q)({data:e,hasil:o,res:r,kode_barcode_set:a}),s=Object(F.r)({data:e,res:r,hasil:o,kode_barcode_set:a}),i=JSON.parse(localStorage.getItem("transaksiPenjualan"))||[],c=JSON.parse(localStorage.getItem("transaksiPenjualan_level2"))||[],d=JSON.parse(localStorage.getItem("transaksiPenjualan_level3"))||[];i.push(n),c.push(l),d.push(s);var p=i.map((function(e){return parseFloat(e.netto_disc)})).reduce((function(e,a){return e+a}),0);localStorage.setItem("GrandTotalNetto",p),localStorage.setItem("transaksiPenjualan",JSON.stringify(i)),localStorage.setItem("transaksiPenjualan_level2",JSON.stringify(c)),localStorage.setItem("transaksiPenjualan_level3",JSON.stringify(d)),j.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),t.props.dispatch(Object(O.k)()),t.props.dispatch(Object(N.i)()),t.props.dispatch(Object(m.b)("FormTransaksiReturnPenjualan")),t.props.dispatch(Object(_.g)()),t.props.dispatch(Object(G.q)("transaksiPenjualan")),t.setState({discGlobalGr:parseFloat(0)/100*parseFloat(localStorage.getItem("GrandTotalNetto")),discGlobalPr:0,GrandTotalNetto:(parseFloat(localStorage.getItem("GrandTotalNetto"))-0).toFixed(3)})})).catch((function(e){return Object(x.c)("Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu")}))}},{key:"render",value:function(){var e=this;return i.a.createElement(P.a,{onSubmit:this.props.handleSubmit},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{"data-for":"refresh",className:"btn btn-circle btn-primary",type:"button","data-tip":!0,onClick:function(){return e.props.dispatch(Object(m.b)("FormTransaksiReturnPenjualan"))}},i.a.createElement("i",{className:"fa fa-retweet","aria-hidden":"true"}),i.a.createElement(y.a,{id:"refresh",type:"dark",effect:"solid"},i.a.createElement("span",null,"Refresh"))))),i.a.createElement("div",{className:"col-md-12 col-lg-12 d-none"},i.a.createElement(d.a,{name:"noFaktur",label:this.props.noFaktur,type:"text",readOnly:!0,component:g.b,defaultValue:this.props.noFaktur,normalize:function(e){return e&&e.toUpperCase()}})),i.a.createElement("div",{className:"col-lg-12 row"!==this.state.no_aksesoris?"col-md-3 col-lg-3 d-none":this.state.isBarangToko?"col-md-3 col-lg-3":"col-md-3 col-lg-3 d-none"},i.a.createElement(d.a,{name:"kode_barocde",label:"Kode Barcode",type:"text",component:g.b,placeholder:"Biarkan Kosong jika Tidak Digunakan",normalize:function(e){return e&&e.toUpperCase()},onChange:this.handleCheck})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-4 form-group":"col-md-4 form-group d-none"},""!==String(this.props.KodeBarangList)?i.a.createElement(d.a,{name:"kodeBarang",label:"Kode Model",component:g.c,className:"form-control",onChange:function(a){return e.pilihBarang(a.value)},options:this.props.KodeBarangList.filter((function(e){return"PERHIASAN"===e.kode_kelompok||"AKSESORIS"===e.kode_kelompok})).map((function(e){return{value:e.kode_jenis,name:"".concat(e.kode_jenis," / ").concat(e.nama_jenis)}}))}):i.a.createElement(h.a,{width:"100%",height:50})),i.a.createElement("div",{className:(this.state.no_aksesoris,"col-md-2 col-lg-2 d-none")},i.a.createElement(d.a,{name:"kadar",label:"Kadar Jual",type:"number",component:g.b})),i.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},i.a.createElement(d.a,{name:"kodeKategori",label:"Kadar Jual",type:"number",component:g.b})),i.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},i.a.createElement(d.a,{name:"namaKategori",label:"Kadar Jual",type:"number",component:g.b})),i.a.createElement("div",{className:this.state.no_aksesoris},i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(d.a,{name:"p",label:"Plastik",type:"number",component:g.b,normalize:F.c})),i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(d.a,{name:"k",label:"Kertas",type:"number",component:g.b,normalize:F.c})),i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(d.a,{name:"pkg",label:"Pkg (Gr)",type:"number",component:g.b,onBlur:this.onclick1(),normalize:F.g})),i.a.createElement(W.a,null),i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(d.a,{name:"bruto",label:"Berat (Gr)",type:"number",component:g.b,onChange:this.onclick1(),normalize:F.g})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(d.a,{name:"kadarTransaksi",label:"Kadar Jual",type:"number",component:g.b,onBlur:function(){return e.onclick1()},readOnly:Object(F.z)()})),i.a.createElement("div",{className:"col-md-3 form-group d-none"},i.a.createElement(d.a,{name:"initKadarTransaksi",label:"Kadar Jual",type:"number",component:g.b,readOnly:Object(F.z)()})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(d.a,{name:"netto",label:"Netto (Gr)",type:"text",component:g.b,readOnly:!0})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(d.a,{name:"gross",label:"Gross (Gr)",type:"text",component:g.b,readOnly:!0})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(d.a,{name:"discGlobalPr",label:"Diskon (%)",type:"number",component:g.b,onBlur:function(){return e.onclick1()}})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(d.a,{name:"discGlobalGr",label:"Diskon (Gr)",type:"text",component:g.b,readOnly:!0})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(d.a,{name:"nettoDiscGlobalExt",label:"Netto - Diskon (Gr)",type:"text",component:g.b,readOnly:!0})),i.a.createElement("div",{className:this.state.isBarangToko?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement("label",{htmlFor:""},"Ongkos (Rp)"),i.a.createElement(d.a,Object.assign({name:"rp",component:"input",type:"tel",className:"form-control"},I)))),i.a.createElement("div",{className:this.state.aksesoris},i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement(d.a,{name:"qty",label:"Qty",type:"number",component:g.b})),i.a.createElement("div",{className:"col-md-3 col-lg-3"},i.a.createElement("label",{htmlFor:""},"Harga Jual"),i.a.createElement(d.a,Object.assign({name:"harga_jual",component:"input",type:"tel",className:"form-control"},I))))),i.a.createElement("div",{className:"col-md-12 form-group mt-3"},i.a.createElement(S.a,{kadar:this.props.kadar,prevKadar:this.props.prevKadar,statusAuth:this.props.statusAuth,handleOtorisasi:function(){return e.props.dispatch(Object(T.b)())}})))}}]),t}(s.Component);w=Object(p.a)({form:"FormTransaksiReturnPenjualan",enableReinitialize:!0})(w);var D=Object(u.a)("FormTransaksiReturnPenjualan");a.default=Object(c.b)((function(e){var a=D(e,"bruto","kadarTransaksi","pkg","discGlobalPr","initKadarTransaksi"),t=a.bruto,r=a.kadarTransaksi,o=a.pkg,n=a.discGlobalPr,l=a.initKadarTransaksi;return{netto:Object(F.D)(parseFloat(Object(F.xb)(t)||0)*(parseFloat(Object(F.xb)(r)||0)/100)),gross:Object(F.D)(parseFloat(Object(F.xb)(t)||0)+parseFloat(Object(F.xb)(o)||0)),discGlobalGr:Object(F.D)(parseFloat(Object(F.xb)(t)||0)*(parseFloat(Object(F.xb)(n)||0)/100)),kadar:r,prevKadar:l,statusAuth:e.authorizationState.statusAuthorization,KodeBarangList:e.kodeBarangState.listKodeBarang||[],initialValues:{discGlobalPr:0,p:0,k:0,qty:0,pkg:0,bruto:0}}}))(w)},793:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){return c}));var r=t(187),o=t(802),n=localStorage.getItem("namaTimbangan"),l=localStorage.getItem("enableTimbangan"),s=function(e){l&&r.a.database().ref(n).on("value",(function(a){var t=a.val();e("bruto",t.nilai)}))},i=function(e){var a=Object(o.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));a.on("connect",(function(){console.log("SOCKET CONNECTED : ",a.connected)}));var t=localStorage.getItem("username");a.on("timbangan-emit",(function(a){var r;(null===(r=a.user_id)||void 0===r?void 0:r.toLowerCase())===(null===t||void 0===t?void 0:t.toLowerCase())&&(localStorage.setItem("timbangan-active","true"),e(document.activeElement.name,a.value))}))},c=function(){var e=Object(o.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));localStorage.setItem("timbangan-active","false"),e.disconnect()}},795:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var r=function(e){if(!(e.indexOf(" ")>0||e.indexOf("-")>0||e.indexOf("//")>0||e.indexOf("/")>0))return!1;var a=0,t=0;return e.indexOf("-")>0?(a=parseFloat(e.split("-")[0]).toFixed(3),{NW:t=parseFloat(e.split("-")[1]).toFixed(3),GW:a,PKG:(parseFloat(a)-parseFloat(t)).toFixed(3)}):e.indexOf("//")>0&&void function(e){var a=0,t=0,r=0;if(e.indexOf("//")>0){o(e.split("//"))}else{if(!(e.indexOf("/")>0)){var n=e.split(" ");return a=parseFloat(n[0]).toFixed(3),t=parseFloat(n[1]).toFixed(3),r=(parseFloat(a)-parseFloat(t)).toFixed(3),{GW:a,NW:t,PKG:r}}o(e.split("/"))}}(e)};function o(e){var a,t;return a=parseFloat(e[0].trim()).toFixed(3),{NW:t=parseFloat(e[1].trim()).toFixed(3),GW:a,PKG:(parseFloat(a)-parseFloat(t)).toFixed(3)}}var n=function(e){var a=function(e){if("4"===e.charAt(0)||"5"===e.charAt(0)&&"0000"===e.slice(-4)){var a=e.charAt(0),t=e.substr(1,a)/1e3,r=e.substr(Number(a)+1,1),o=e.substr(Number(a)+2,r)/1e3,n=parseFloat(t)-parseFloat(o);return{NW:parseFloat(o).toFixed(3),PKG:parseFloat(n).toFixed(3),GW:parseFloat(t).toFixed(3)}}if(22===e.length&&"0"===e.substr(0,1)){var l=parseFloat(e.substr(13,5))/100,s=parseFloat(e.substr(18,4))/100,i=l+s;return{NW:parseFloat(l).toFixed(3),PKG:parseFloat(s).toFixed(3),GW:parseFloat(i).toFixed(3)}}if(20===e.length){var c=e.substr(8,6)/100,m=e.substr(14,6)/100,d=m-c;return{NW:parseFloat(c).toFixed(3),PKG:parseFloat(d).toFixed(3),GW:parseFloat(m).toFixed(3)}}if(14===e.length){var p=e.substr(1,4)/1e3,u=e.substr(6,4)/1e3,b=p-u;return{NW:parseFloat(u).toFixed(3),PKG:parseFloat(b).toFixed(3),GW:parseFloat(p).toFixed(3)}}}(e),t=function(e){var a=e.indexOf("X");if(12===e.length-1-a&&"0"!==e.substr(1,1)){console.log(e.substr(a+7,5));var t=parseFloat(e.substr(a+1,7))/100,r=parseFloat(e.substr(a+8,5))/100;return{NW:t-r,PKG:r,GW:t}}return!1}(e),o=function(e){if("#"===e.substr(5,1)){var a,t,r;return r=(t=parseFloat(e.split("#")[0]).toFixed(3)/100)-(a=parseFloat(e.split("#")[1]).toFixed(3)/100),console.log(e),{NW:a,GW:t,PKG:r}}return!1}(e),n=function(e){if("LLP"===e.substr(0,3)){console.log("INI DI LLP");var a=e.split("-"),t=a[1].substr(0,a[1].length-1),r=a[2].substr(0,a[2].length-1);return{NW:r,PKG:parseFloat(t)-parseFloat(r),GW:t}}return!1}(e),l=function(e){if(15===e.length||14===e.length||16===e.length){var a=e.charAt(0),t=e.charAt(Number(a)+1),r=e.substr(1,a)/1e3,o=e.substr(Number(a)+2,t)/1e3,n=r-o;return{NW:parseFloat(o).toFixed(3),PKG:parseFloat(n).toFixed(3),GW:parseFloat(r).toFixed(3)}}return!1}(e),s=function(e){if(-1!==e.indexOf("//")){var a=e.split("//")[0],t=e.split("//")[1],r=Number(a)-Number(t);return console.log(parseFloat(t).toFixed(3),parseFloat(r).toFixed(3),parseFloat(a).toFixed(3)),{NW:parseFloat(t).toFixed(3),PKG:parseFloat(r).toFixed(3),GW:parseFloat(a).toFixed(3)}}if(-1!==e.indexOf("-")){if(-1!==e.indexOf("ayu")||-1!==e.indexOf("AYU")){var o=e.split("-")[1],n=e.split("-")[2],l=Number(o)-Number(n);return{NW:parseFloat(n).toFixed(3),PKG:parseFloat(l).toFixed(3),GW:parseFloat(o).toFixed(3)}}var s=e.split("-")[0],i=e.split("-")[1],c=Number(s)-Number(i);return{NW:parseFloat(i).toFixed(3),PKG:parseFloat(c).toFixed(3),GW:parseFloat(s).toFixed(3)}}return!1}(e),i=r(e);return a||(o||(n||(s||(i||(l||(t||void 0))))))}},796:function(e,a,t){"use strict";var r=t(0),o=t.n(r),n=t(440),l=t(1),s=t(48);a.a=function(e){var a,t,r;return o.a.createElement("div",{className:Object(l.Db)()?"col-md-".concat(null!==(a=e.width)&&void 0!==a?a:3," form-group"):"col-md-".concat(null!==(t=e.width)&&void 0!==t?t:3," form-group d-none")},o.a.createElement(n.a,{name:null!==(r=e.name)&&void 0!==r?r:"qty",label:"Quantity",type:"number",normalize:l.e,component:s.b}))}},804:function(e,a,t){"use strict";var r=t(0),o=t.n(r),n=t(440),l=t(441),s=t(184),i=t(1),c=t(48);a.a=Object(l.a)({form:"authorizationForm"})((function(e){return Object(i.Cb)()?e.isUpperThan?e.kadar>e.prevKadar?e.statusAuth?o.a.createElement(s.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement("hr",null),o.a.createElement("div",{className:"col-lg-12 row justify-content-end"},o.a.createElement("div",{className:"col-md-3 form-group"},o.a.createElement(n.a,{name:"user_id",label:"User ID",type:"text",component:c.b})),o.a.createElement("div",{className:"col-md-3 form-group"},o.a.createElement(n.a,{name:"password",label:"Password",type:"password",component:c.b})),o.a.createElement("div",{className:"col-md-3 form-group"},o.a.createElement("label",{htmlFor:""},"\xa0"),o.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return e.handleOtorisasi()}},"Otorisasi")))):o.a.createElement(s.a,null):e.kadar<e.prevKadar?e.statusAuth?o.a.createElement(s.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement("hr",null),o.a.createElement("div",{className:"col-lg-12 row justify-content-end"},o.a.createElement("div",{className:"col-md-3 form-group"},o.a.createElement(n.a,{name:"user_id",label:"User ID",type:"text",component:c.b})),o.a.createElement("div",{className:"col-md-3 form-group"},o.a.createElement(n.a,{name:"password",label:"Password",type:"password",component:c.b})),o.a.createElement("div",{className:"col-md-3 form-group"},o.a.createElement("label",{htmlFor:""},"\xa0"),o.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return e.handleOtorisasi()}},"Otorisasi")))):o.a.createElement(s.a,null):o.a.createElement(s.a,null)}))}}]);