(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[49],{1325:function(e,t,a){"use strict";a.r(t);var n=a(52),r=a(53),o=a(54),i=a(55),s=a(0),l=a.n(s),c=a(1),u=a(3),d=a(308),m=a(20),p=a(39),b=a(146),h=a(76),f=a(129),g=a(130),k=a(302),v=a(305),F=a(460),N=a(440),x=a(441),O=a(48),E=a(794),j=a(10),S=a(303),G=a(33),y=a(795),K=a(848),W=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onChange=function(e){r.setState({text:e.target.value})},r.state={listSupplier:[],berat:"Berat (Gr)"},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(h.k)()),setTimeout((function(){Object(c.zb)("Kode Barcode")}),300)}},{key:"setKodeBarang",value:function(e){var t=e,a=this.props.KodeBarangList.find((function(e){return e.kode_jenis===t}));this.props.change("kadar",a.kadar_beli),Object(c.zb)("Pkg")}},{key:"changeBerat",value:function(){this.props.change("netto",Object(c.D)(this.props.netto))}},{key:"changeGross",value:function(){this.props.change("bruto",Object(c.D)(this.props.bruto))}},{key:"componentDidUpdate",value:function(e,t){t.text!==this.state.text&&this.handleCheck()}},{key:"handleCheck",value:function(){var e=this,t=this.state.text;clearTimeout(this.timer),this.timer=setTimeout((function(){var a=Object(y.a)(t);a&&(console.log("GW : ".concat(a.GW," - NW : ").concat(a.NW," - PKG : ").concat(a.PKG)),e.props.change("bruto",a.GW-a.PKG),e.props.change("netto",Object(c.D)(e.props.netto)))}),150)}},{key:"render",value:function(){var e=this;return l.a.createElement("form",{onSubmit:this.props.handleSubmit},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(N.a,{name:"kode_barcode",label:"Kode Barcode",type:"tel",component:O.b,onChange:this.onChange})),l.a.createElement("div",{className:"col-lg-8"}),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(N.a,{name:"kode_jenis",label:"Kode jenis",component:O.c,onChange:function(t){return e.setKodeBarang(t)},options:this.props.KodeBarangList.filter((function(e){return"PERHIASAN"===e.kode_kelompok})).map((function(e){return{value:e.kode_jenis,name:e.nama_jenis}}))})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(N.a,{label:"Kadar Beli",name:"kadar",readOnly:!0,component:O.b,type:"number"})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(N.a,Object.assign({label:"Pkg",name:"pkg",component:O.b,type:"number",onChange:this.changeBerat()},c.Q))),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(N.a,Object.assign({label:"Gross",name:"gross",component:O.b,type:"number",onChange:this.changeGross()},c.Q))),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(N.a,{label:this.state.berat,name:"bruto",component:O.b,type:"text",onChange:this.changeBerat(),normalize:c.c,readOnly:!0})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(N.a,{label:"Netto",name:"netto",component:O.b,type:"text",readOnly:!0}))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Selesai",l.a.createElement("i",{className:"fa fa-paper-plane ml-3","aria-hidden":"true"})))))}}]),a}(s.Component);W=Object(x.a)({form:"FormTotalanSementaraMonica",enableReinitialize:!0,validate:K.a})(W);var T=Object(F.a)("FormTotalanSementaraMonica"),_=Object(G.b)((function(e){var t=T(e,"bruto"),a=T(e,"pkg"),n=T(e,"gross"),r=T(e,"kadar");return{bruto:Object(c.b)(n)-Object(c.b)(a),netto:Object(c.D)(parseFloat(Object(c.xb)(t))*(parseFloat(r)/100))||0,KodeBarangList:e.kodeBarangState.listKodeBarang||[],initialValues:{pkg:0,bruto:0,netto:0}}}))(W),P=a(433),B=Object(F.a)("TotalanSementaraMonica"),A=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tipeTransksi:"HUTANG",listSales:[],columns:[{dataField:"kode_jenis",text:"Kode Jenis",footer:""},{dataField:"bruto",text:"Berat",align:"right",headerAlign:"right",formatter:function(e){return Object(c.D)(e)},footerAlign:"right",footer:function(e){return Object(c.D)(e.reduce((function(e,t){return e+t}),0))}},{dataField:"gross",text:"Gross",align:"right",headerAlign:"right",formatter:function(e){return Object(c.D)(e)},footerAlign:"right",footer:function(e){return Object(c.D)(e.reduce((function(e,t){return e+t}),0))}},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(e,t,a){return l.a.createElement("div",{className:"text-center"},l.a.createElement("button",{"data-tip":!0,"data-for":"hapus",className:"btn btn-danger mr-2",onClick:function(){return r.props.dispatch(Object(u.l)({name:"TotalanSementaraMonica",getMethod:Object(P.b)(),index:a}))}},l.a.createElement(d.a,{id:"hapus",type:"dark",effect:"solid"},l.a.createElement("span",null,"Hapus")),l.a.createElement("i",{className:"fa fa-trash mr-1"})),l.a.createElement("br",null))}}],tanggal:"",sales:"",loading:!1},r}return Object(r.a)(a,[{key:"sendTotalan",value:function(){return""===this.state.kode_lokasi?(Object(m.c)("Mohon isi Lokasi"),!1):null===localStorage.getItem("TotalanSementaraMonica")?(Object(m.c)("Data masih Kosong, Silahkan tambahkan dahulu"),!1):void this.props.dispatch(Object(P.d)())}},{key:"componentDidMount",value:function(){Object(c.nb)(["TotalanSementaraMonica"]),this.props.dispatch(Object(p.b)()),this.props.dispatch(Object(P.b)()),this.props.dispatch(Object(b.e)()),this.props.dispatch(Object(h.k)()),this.props.dispatch(Object(f.g)()),this.props.dispatch(Object(g.f)())}},{key:"handlerSimpan",value:function(){this.props.dispatch(Object(P.c)())}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"card"},l.a.createElement(k.a,{title:"Totalan Timbangan"}),l.a.createElement(v.default,{content:l.a.createElement(_,{onSubmit:function(t){return e.handlerSimpan(t)},tipe:this.state.tipeTransksi}),title:"Tambah Barang"}),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"col-lg-12 mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(N.a,{name:"tanggal",label:"Tanggal",component:O.b,type:"date",onChange:function(t){return e.setState({tanggal:t})}})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(N.a,{name:"kode_lokasi",component:O.c,options:this.props.dataLokasiPindah.filter((function(e){return"SALES"!==e.kode_lokasi})).map((function(e){return{value:e.kode_lokasi,name:e.nama_lokasi}})),type:"text",label:"Kode Lokasi",placeholder:"Masukan Kode Lokasi",onChange:function(t){return e.setState({kode_lokasi:t})},disabled:this.props.listTotalanSementaraMonica.length>0})),l.a.createElement(E.a,{disabled:this.props.listTotalanSementaraMonica.length>0,kode_lokasi:this.state.kode_lokasi,className:"col-lg-4"}),l.a.createElement("div",{className:"col-lg-12 mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"}),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.props.dispatch(Object(j.j)())},disabled:void 0===this.props.kode_lokasi},"Tambah Data"))),l.a.createElement("div",{className:"col-lg-12 mt-3"},l.a.createElement(S.a,{keyField:"kode_jenis",data:this.props.listTotalanSementaraMonica,columns:this.state.columns})))),l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-info",disabled:this.props.onSend,onClick:function(){return e.sendTotalan()}},this.props.onSend?l.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Simpan"))))))))))}}]),a}(s.Component);A=Object(x.a)({form:"TotalanSementaraMonica",enableReinitialize:!0})(A);t.default=Object(G.b)((function(e){return{noFaktur:e.provinsi.noFaktur,username:e.provinsi.username,listTotalanSementaraMonica:e.totalanSementaraMonicaState.listTotalanSementaraMonica,lokasi:e.lokasiState.listLokasi||[],dataLokasiPindah:e.provinsi.dataLokasiPindah,onSend:e.provinsi.onSend,kode_lokasi:B(e,"kode_lokasi"),initialValues:{tanggal:Object(c.O)()}}}),null)(A)},460:function(e,t,a){"use strict";var n=a(97),r=a.n(n),o=a(29);t.a=function(e){var t=e.getIn;return function(e,a){r()(e,"Form value must be specified");var n=a||function(e){return t(e,"form")};return function(a){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];return r()(s.length,"No fields specified"),1===s.length?t(n(a),e+".values."+s[0]):s.reduce((function(r,i){var s=t(n(a),e+".values."+i);return void 0===s?r:o.a.setIn(r,i,s)}),{})}}}(o.a)},794:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(33),i=a(440),s=a(130),l=a(1),c=a(48);t.a=function(e){var t=Object(o.d)((function(e){return e.bakiState.listBaki})),a=Object(o.c)(),n=[{value:"ALL",name:"SEMUA"}];return t.filter((function(t){return t.kode_lokasi===e.kode_lokasi})).map((function(e){return n.push({value:e.kode_baki,name:e.nama_baki}),!0})),e.removeAllValue&&(n=n.filter((function(e){return"ALL"!==e.value}))),r.a.createElement("div",{className:Object(l.k)(e.className)},r.a.createElement(i.a,{name:e.kode||"kode_baki",component:c.c,options:n,type:"text",label:"Kode Baki",placeholder:"Pilih Kode Baki",disabled:e.disabled,onChange:function(t){localStorage.setItem(e.namaLocal,JSON.stringify(t)),"ALL"!==t.value&&a(Object(s.i)(t.value))}}))}},795:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=function(e){if(!(e.indexOf(" ")>0||e.indexOf("-")>0||e.indexOf("//")>0||e.indexOf("/")>0))return!1;var t=0,a=0;return e.indexOf("-")>0?(t=parseFloat(e.split("-")[0]).toFixed(3),{NW:a=parseFloat(e.split("-")[1]).toFixed(3),GW:t,PKG:(parseFloat(t)-parseFloat(a)).toFixed(3)}):e.indexOf("//")>0&&void function(e){var t=0,a=0,n=0;if(e.indexOf("//")>0){r(e.split("//"))}else{if(!(e.indexOf("/")>0)){var o=e.split(" ");return t=parseFloat(o[0]).toFixed(3),a=parseFloat(o[1]).toFixed(3),n=(parseFloat(t)-parseFloat(a)).toFixed(3),{GW:t,NW:a,PKG:n}}r(e.split("/"))}}(e)};function r(e){var t,a;return t=parseFloat(e[0].trim()).toFixed(3),{NW:a=parseFloat(e[1].trim()).toFixed(3),GW:t,PKG:(parseFloat(t)-parseFloat(a)).toFixed(3)}}var o=function(e){var t=function(e){if("4"===e.charAt(0)||"5"===e.charAt(0)&&"0000"===e.slice(-4)){var t=e.charAt(0),a=e.substr(1,t)/1e3,n=e.substr(Number(t)+1,1),r=e.substr(Number(t)+2,n)/1e3,o=parseFloat(a)-parseFloat(r);return{NW:parseFloat(r).toFixed(3),PKG:parseFloat(o).toFixed(3),GW:parseFloat(a).toFixed(3)}}if(22===e.length&&"0"===e.substr(0,1)){var i=parseFloat(e.substr(13,5))/100,s=parseFloat(e.substr(18,4))/100,l=i+s;return{NW:parseFloat(i).toFixed(3),PKG:parseFloat(s).toFixed(3),GW:parseFloat(l).toFixed(3)}}if(20===e.length){var c=e.substr(8,6)/100,u=e.substr(14,6)/100,d=u-c;return{NW:parseFloat(c).toFixed(3),PKG:parseFloat(d).toFixed(3),GW:parseFloat(u).toFixed(3)}}if(14===e.length){var m=e.substr(1,4)/1e3,p=e.substr(6,4)/1e3,b=m-p;return{NW:parseFloat(p).toFixed(3),PKG:parseFloat(b).toFixed(3),GW:parseFloat(m).toFixed(3)}}}(e),a=function(e){var t=e.indexOf("X");if(12===e.length-1-t&&"0"!==e.substr(1,1)){console.log(e.substr(t+7,5));var a=parseFloat(e.substr(t+1,7))/100,n=parseFloat(e.substr(t+8,5))/100;return{NW:a-n,PKG:n,GW:a}}return!1}(e),r=function(e){if("#"===e.substr(5,1)){var t,a,n;return n=(a=parseFloat(e.split("#")[0]).toFixed(3)/100)-(t=parseFloat(e.split("#")[1]).toFixed(3)/100),console.log(e),{NW:t,GW:a,PKG:n}}return!1}(e),o=function(e){if("LLP"===e.substr(0,3)){console.log("INI DI LLP");var t=e.split("-"),a=t[1].substr(0,t[1].length-1),n=t[2].substr(0,t[2].length-1);return{NW:n,PKG:parseFloat(a)-parseFloat(n),GW:a}}return!1}(e),i=function(e){if(15===e.length||14===e.length||16===e.length){var t=e.charAt(0),a=e.charAt(Number(t)+1),n=e.substr(1,t)/1e3,r=e.substr(Number(t)+2,a)/1e3,o=n-r;return{NW:parseFloat(r).toFixed(3),PKG:parseFloat(o).toFixed(3),GW:parseFloat(n).toFixed(3)}}return!1}(e),s=function(e){if(-1!==e.indexOf("//")){var t=e.split("//")[0],a=e.split("//")[1],n=Number(t)-Number(a);return console.log(parseFloat(a).toFixed(3),parseFloat(n).toFixed(3),parseFloat(t).toFixed(3)),{NW:parseFloat(a).toFixed(3),PKG:parseFloat(n).toFixed(3),GW:parseFloat(t).toFixed(3)}}if(-1!==e.indexOf("-")){if(-1!==e.indexOf("ayu")||-1!==e.indexOf("AYU")){var r=e.split("-")[1],o=e.split("-")[2],i=Number(r)-Number(o);return{NW:parseFloat(o).toFixed(3),PKG:parseFloat(i).toFixed(3),GW:parseFloat(r).toFixed(3)}}var s=e.split("-")[0],l=e.split("-")[1],c=Number(s)-Number(l);return{NW:parseFloat(l).toFixed(3),PKG:parseFloat(c).toFixed(3),GW:parseFloat(s).toFixed(3)}}return!1}(e),l=n(e);return t||(r||(o||(s||(l||(i||(a||void 0))))))}},848:function(e,t,a){"use strict";t.a=function(e){var t={};return e.kode_customer||(t.kode_customer="Tidak Boleh kosong"),e.no_bon||(t.no_bon="Tidak Boleh kosong"),e.bruto||(t.bruto="Tidak Boleh kosong"),e.netto||(t.netto="Tidak Boleh kosong"),t}}}]);