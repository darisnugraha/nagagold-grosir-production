(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[40],{1218:function(e,a,t){"use strict";t.r(a);var o=t(52),n=t(53),r=t(54),l=t(55),s=t(0),c=t.n(s),i=t(33),d=t(440),m=t(441),p=t(460),u=t(304),b=t(48),g=t(96),k=t.n(g),v=t(76),h=t(1),f=t(5),F=t(795),E=t(183),j=t(804),O=t(312),x=t(796),N=t(793),_=t(61),K=Object(u.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),G=function(e){Object(r.a)(t,e);var a=Object(l.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleCheck=function(e){var a=e.target.value;clearTimeout(n.timer),n.timer=setTimeout((function(){var e=Object(F.a)(a);e&&(n.props.change("bruto",(e.GW-e.PKG).toFixed(3)),n.props.change("pkg",e.PKG),n.props.change("netto",n.props.netto),Object(h.R)()&&n.props.dispatch(Object(_.p)(!1)))}),150)},n.kodeBarangRef=c.a.createRef(),n.state={kodeBarang:[],non_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none",stockBruto:0,stockNetto:0},n}return Object(n.a)(t,[{key:"componentDidMount",value:function(){Object(h.qb)(),Object(N.c)(this.props.change),this.props.dispatch(Object(v.k)()),this.props.dispatch(Object(O.c)())}},{key:"componentWillUnmount",value:function(){Object(N.a)()}},{key:"onclick1",value:function(){this.props.change("netto",this.props.netto),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross),this.props.change("discGlobalGr",this.props.discGlobalGr),this.props.change("nettoDiscGlobalExt",Object(h.D)(Object(h.xb)(this.props.netto)-Object(h.xb)(this.props.discGlobalGr)))}},{key:"pilihBarang",value:function(e){var a=this,t=Object(h.tb)(e),o=t,n=this.props.KodeBarangList.filter((function(e){return e.kode_jenis===o})),r=localStorage.getItem("customer_1")||"-";Object(f.b)("kelompok-harga/get/".concat(r,"&-&").concat(t,"&PUSAT")).then((function(e){var t,o,r,l,s,c,i,d,m,p,u,b,g,k,v,f,F;if("undefined"===typeof(null===(t=e.data)||void 0===t?void 0:t.kode_tukar_normal))return a.setState({kodeJenis:n[0].kode_jenis,namaJenis:n[0].nama_jenis,kadarCetak:n[0].kadar_cetak,kadarJual:n[0].kadar_jual,kodeKategori:n[0].kode_kategori,namaKategori:n[0].nama_kategori,diskon:0,harga_jual:0,stockBruto:0,stockNetto:0}),a.props.change("keterangan",n[0].nama_jenis),a.props.change("kadar",n[0].kadar_cetak),a.props.change("kadarTransaksi",n[0].kadar_jual),a.props.change("initKadarTransaksi",n[0].kadar_jual),a.props.change("kodeKategori",n[0].kode_kategori),a.props.change("namaKategori",n[0].nama_kategori),a.props.change("harga_jual",0),Object(h.zb)("Plastik"),!1;"AKSESORIS"===(null===(o=e.data)||void 0===o?void 0:o.kode_kelompok)?a.setState({non_aksesoris:"col-lg-12 row d-none",aksesoris:"col-lg-12 row"}):a.setState({non_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none"}),a.setState({kodeJenis:n[0].kode_jenis,namaJenis:null===(r=e.data)||void 0===r?void 0:r.nama_jenis,kadarCetak:null===(l=e.data)||void 0===l?void 0:l.kode_tukar_normal,kadarJual:null===(s=e.data)||void 0===s?void 0:s.kode_tukar_normal,kodeKategori:null===(c=e.data)||void 0===c?void 0:c.kode_kategori,namaKategori:null===(i=e.data)||void 0===i?void 0:i.nama_kategori,diskon:(null===(d=e.data)||void 0===d?void 0:d.diskon)||0,harga_jual:(null===(m=e.data)||void 0===m?void 0:m.harga_aksesoris)||0,stockBruto:null===(p=e.data)||void 0===p?void 0:p.total_bruto,stockNetto:null===(u=e.data)||void 0===u?void 0:u.total_netto}),a.props.change("keterangan",null===(b=e.data)||void 0===b?void 0:b.nama_jenis),a.props.change("kadar",null===(g=e.data)||void 0===g?void 0:g.kode_tukar_normal),a.props.change("kadarTransaksi",null===(k=e.data)||void 0===k?void 0:k.kode_tukar_normal),a.props.change("initKadarTransaksi",null===(v=e.data)||void 0===v?void 0:v.kode_tukar_normal),a.props.change("kodeKategori",null===(f=e.data)||void 0===f?void 0:f.kode_kategori),a.props.change("namaKategori",null===(F=e.data)||void 0===F?void 0:F.nama_kategori),a.props.change("harga_jual",0)})).catch((function(e){a.setState({kodeJenis:n[0].kode_jenis,namaJenis:n[0].nama_jenis,kadarCetak:n[0].kadar_cetak,kadarJual:n[0].kadar_jual,kodeKategori:n[0].kode_kategori,namaKategori:n[0].nama_kategori,diskon:0,harga_jual:0,stockBruto:0,stockNetto:0}),a.props.change("keterangan",n[0].nama_jenis),a.props.change("kadar",n[0].kadar_cetak),a.props.change("kadarTransaksi",n[0].kadar_jual),a.props.change("initKadarTransaksi",n[0].kadar_jual),a.props.change("kodeKategori",n[0].kode_kategori),a.props.change("namaKategori",n[0].nama_kategori),a.props.change("harga_jual",0),Object(h.zb)(Object(h.cb)()?"Pkg (Gr)":Object(h.R)()?"Kode Barcode":"Plastik")}))}},{key:"setBruto",value:function(){this.props.change("bruto",localStorage.getItem("Timbangan"))}},{key:"render",value:function(){var e=this;return c.a.createElement(E.a,{onSubmit:this.props.handleSubmit},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12 col-lg-12 d-none"},c.a.createElement(d.a,{name:"noFaktur",label:this.props.noFaktur,type:"text",readOnly:!0,component:b.b,defaultValue:this.props.noFaktur,normalize:function(e){return e&&e.toUpperCase()}})),c.a.createElement("div",{className:"col-md-4 col-lg-4"},c.a.createElement(d.a,{tabIndex:1,name:"kode_barocde",label:"Kode Barcode",type:"text",component:b.b,placeholder:"Biarkan Kosong jika Tidak Digunakan",onChange:this.handleCheck})),c.a.createElement("div",{className:"col-md-4 col-lg-4"},""!==String(this.props.KodeBarangList)?c.a.createElement(d.a,{name:"kodeBarang",label:"Kode Model",defaultRef:this.kodeBarangRef,component:Object(h.cb)()?b.d:b.c,className:"form-control",onChange:function(a){return e.pilihBarang(Object(h.cb)()?a:a.value)},options:this.props.KodeBarangList.filter((function(e){return"PERHIASAN"===e.kode_kelompok||"AKSESORIS"===e.kode_kelompok})).map((function(e){return{value:e.kode_jenis,name:"".concat(e.kode_jenis," / ").concat(e.nama_jenis)}}))}):c.a.createElement(k.a,{width:"100%",height:50})),c.a.createElement("div",{className:(this.state.aksesoris,"col-md-3 col-lg-3 d-none")},c.a.createElement(d.a,{name:"kadar",label:"Kadar Jual",type:"number",component:b.b,readOnly:!0})),c.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},c.a.createElement(d.a,{name:"kodeKategori",label:"Kadar Jual",type:"number",component:b.b})),c.a.createElement("div",{className:this.state.non_aksesoris},c.a.createElement("div",{className:"col-md-12 col-lg-12"},c.a.createElement(d.a,{name:"keterangan",label:"Keterangan",type:"text",component:b.b,normalize:function(e){return null===e||void 0===e?void 0:e.toUpperCase()}})),c.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},c.a.createElement(d.a,{name:"namaKategori",label:"Kadar Jual",type:"number",component:b.b})),c.a.createElement("div",{className:Object(h.cb)()?"col-md-3 col-lg-3 d-none":"col-md-3 col-lg-3 "},c.a.createElement(d.a,{name:"p",label:"Plastik",type:"number",component:b.b,normalize:h.c})),c.a.createElement("div",{className:Object(h.cb)()?"col-md-3 col-lg-3 d-none":"col-md-3 col-lg-3 "},c.a.createElement(d.a,{name:"k",label:"Kertas",type:"number",component:b.b,normalize:h.c})),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(d.a,{name:"pkg",label:"Pkg (Gr)",type:"text",component:b.b,onBlur:function(){return e.onclick1()},normalize:h.g})),c.a.createElement(x.a,null),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(d.a,{name:"bruto",label:"Berat (Gr)",type:"text",component:b.b,onChange:this.onclick1(),normalize:h.g})),c.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},c.a.createElement(d.a,Object.assign({name:"hargaPerGram",label:"Harga / Gram",type:"number",component:b.b,onChange:this.onclick1()},K))),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(d.a,{name:"kadarTransaksi",label:"Kadar Jual",type:"number",component:b.b,readOnly:Object(h.z)(),onBlur:function(){return e.onclick1()}})),c.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},c.a.createElement(d.a,{name:"initKadarTransaksi",label:"Kadar Jual",type:"number",component:b.b,readOnly:Object(h.z)()})),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(d.a,{name:"netto",label:"Netto (Gr)",type:"text",component:b.b,readOnly:!0})),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement(d.a,{name:"gross",label:"Gross (Gr)",type:"text",component:b.b,readOnly:!0})),c.a.createElement("div",{className:Object(h.cb)()?"col-md-3 col-lg-3 d-none":"col-md-3 col-lg-3 "},c.a.createElement(d.a,{name:"discGlobalPr",label:"Diskon (%)",type:"number",component:b.b,onBlur:function(){return e.onclick1()}})),c.a.createElement("div",{className:Object(h.cb)()?"col-md-3 col-lg-3 d-none":"col-md-3 col-lg-3 "},c.a.createElement(d.a,{name:"discGlobalGr",label:"Diskon (Gr)",type:"text",component:b.b,readOnly:!0})),c.a.createElement("div",{className:Object(h.cb)()?"col-md-3 col-lg-3 d-none":"col-md-3 col-lg-3 "},c.a.createElement(d.a,{name:"nettoDiscGlobalExt",label:"Netto - Diskon (Gr)",type:"text",component:b.b,readOnly:!0})),c.a.createElement("div",{className:"col-md-3 col-lg-3"},c.a.createElement("label",{htmlFor:""},"Ongkos (Rp)"),c.a.createElement(d.a,Object.assign({name:"rp",component:"input",type:"tel",className:"form-control"},K)))),c.a.createElement("div",{className:this.state.aksesoris},c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(d.a,{name:"qty",label:"Qty",type:"number",component:b.b})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(d.a,Object.assign({name:"harga_jual",label:"Harga Jual",type:"telp",component:b.b},K)))),c.a.createElement("div",{className:"col-md-12 form-group mt-3"},c.a.createElement(j.a,{kadar:this.props.kadar,prevKadar:this.props.prevKadar,statusAuth:this.props.statusAuth,handleOtorisasi:function(){return e.props.dispatch(Object(O.b)())}}))))}}]),t}(s.Component);G=Object(m.a)({form:"FormTransaksiPenjualan",enableReinitialize:!0})(G);var y=Object(p.a)("FormTransaksiPenjualan");a.default=Object(i.b)((function(e){var a=y(e,"bruto","kadarTransaksi","pkg","discGlobalPr","initKadarTransaksi"),t=a.bruto,o=a.pkg,n=a.discGlobalPr,r=a.kadarTransaksi,l=a.initKadarTransaksi;return{netto:Object(h.D)(parseFloat(Object(h.xb)(t)||0)*(parseFloat(Object(h.xb)(r)||0)/100)),gross:Object(h.D)(parseFloat(Object(h.xb)(t)||0)+parseFloat(Object(h.xb)(o)||0)),discGlobalGr:Object(h.D)(parseFloat(Object(h.xb)(t)||0)*(parseFloat(Object(h.xb)(n)||0)/100)),kadar:r,prevKadar:l,statusAuth:e.authorizationState.statusAuthorization,KodeBarangList:e.kodeBarangState.listKodeBarang||[],onSend:e.provinsi.onSend,initialValues:{discGlobalPr:0,p:0,k:0,qty:1,pkg:0,bruto:0},bruto:t}}))(G)},793:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return c})),t.d(a,"a",(function(){return i}));var o=t(187),n=t(802),r=localStorage.getItem("namaTimbangan"),l=localStorage.getItem("enableTimbangan"),s=function(e){l&&o.a.database().ref(r).on("value",(function(a){var t=a.val();e("bruto",t.nilai)}))},c=function(e){var a=Object(n.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));a.on("connect",(function(){console.log("SOCKET CONNECTED : ",a.connected)}));var t=localStorage.getItem("username");a.on("timbangan-emit",(function(a){var o;(null===(o=a.user_id)||void 0===o?void 0:o.toLowerCase())===(null===t||void 0===t?void 0:t.toLowerCase())&&(localStorage.setItem("timbangan-active","true"),e(document.activeElement.name,a.value))}))},i=function(){var e=Object(n.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));localStorage.setItem("timbangan-active","false"),e.disconnect()}},795:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var o=function(e){if(!(e.indexOf(" ")>0||e.indexOf("-")>0||e.indexOf("//")>0||e.indexOf("/")>0))return!1;var a=0,t=0;return e.indexOf("-")>0?(a=parseFloat(e.split("-")[0]).toFixed(3),{NW:t=parseFloat(e.split("-")[1]).toFixed(3),GW:a,PKG:(parseFloat(a)-parseFloat(t)).toFixed(3)}):e.indexOf("//")>0&&void function(e){var a=0,t=0,o=0;if(e.indexOf("//")>0){n(e.split("//"))}else{if(!(e.indexOf("/")>0)){var r=e.split(" ");return a=parseFloat(r[0]).toFixed(3),t=parseFloat(r[1]).toFixed(3),o=(parseFloat(a)-parseFloat(t)).toFixed(3),{GW:a,NW:t,PKG:o}}n(e.split("/"))}}(e)};function n(e){var a,t;return a=parseFloat(e[0].trim()).toFixed(3),{NW:t=parseFloat(e[1].trim()).toFixed(3),GW:a,PKG:(parseFloat(a)-parseFloat(t)).toFixed(3)}}var r=function(e){var a=function(e){if("4"===e.charAt(0)||"5"===e.charAt(0)&&"0000"===e.slice(-4)){var a=e.charAt(0),t=e.substr(1,a)/1e3,o=e.substr(Number(a)+1,1),n=e.substr(Number(a)+2,o)/1e3,r=parseFloat(t)-parseFloat(n);return{NW:parseFloat(n).toFixed(3),PKG:parseFloat(r).toFixed(3),GW:parseFloat(t).toFixed(3)}}if(22===e.length&&"0"===e.substr(0,1)){var l=parseFloat(e.substr(13,5))/100,s=parseFloat(e.substr(18,4))/100,c=l+s;return{NW:parseFloat(l).toFixed(3),PKG:parseFloat(s).toFixed(3),GW:parseFloat(c).toFixed(3)}}if(20===e.length){var i=e.substr(8,6)/100,d=e.substr(14,6)/100,m=d-i;return{NW:parseFloat(i).toFixed(3),PKG:parseFloat(m).toFixed(3),GW:parseFloat(d).toFixed(3)}}if(14===e.length){var p=e.substr(1,4)/1e3,u=e.substr(6,4)/1e3,b=p-u;return{NW:parseFloat(u).toFixed(3),PKG:parseFloat(b).toFixed(3),GW:parseFloat(p).toFixed(3)}}}(e),t=function(e){var a=e.indexOf("X");if(12===e.length-1-a&&"0"!==e.substr(1,1)){console.log(e.substr(a+7,5));var t=parseFloat(e.substr(a+1,7))/100,o=parseFloat(e.substr(a+8,5))/100;return{NW:t-o,PKG:o,GW:t}}return!1}(e),n=function(e){if("#"===e.substr(5,1)){var a,t,o;return o=(t=parseFloat(e.split("#")[0]).toFixed(3)/100)-(a=parseFloat(e.split("#")[1]).toFixed(3)/100),console.log(e),{NW:a,GW:t,PKG:o}}return!1}(e),r=function(e){if("LLP"===e.substr(0,3)){console.log("INI DI LLP");var a=e.split("-"),t=a[1].substr(0,a[1].length-1),o=a[2].substr(0,a[2].length-1);return{NW:o,PKG:parseFloat(t)-parseFloat(o),GW:t}}return!1}(e),l=function(e){if(15===e.length||14===e.length||16===e.length){var a=e.charAt(0),t=e.charAt(Number(a)+1),o=e.substr(1,a)/1e3,n=e.substr(Number(a)+2,t)/1e3,r=o-n;return{NW:parseFloat(n).toFixed(3),PKG:parseFloat(r).toFixed(3),GW:parseFloat(o).toFixed(3)}}return!1}(e),s=function(e){if(-1!==e.indexOf("//")){var a=e.split("//")[0],t=e.split("//")[1],o=Number(a)-Number(t);return console.log(parseFloat(t).toFixed(3),parseFloat(o).toFixed(3),parseFloat(a).toFixed(3)),{NW:parseFloat(t).toFixed(3),PKG:parseFloat(o).toFixed(3),GW:parseFloat(a).toFixed(3)}}if(-1!==e.indexOf("-")){if(-1!==e.indexOf("ayu")||-1!==e.indexOf("AYU")){var n=e.split("-")[1],r=e.split("-")[2],l=Number(n)-Number(r);return{NW:parseFloat(r).toFixed(3),PKG:parseFloat(l).toFixed(3),GW:parseFloat(n).toFixed(3)}}var s=e.split("-")[0],c=e.split("-")[1],i=Number(s)-Number(c);return{NW:parseFloat(c).toFixed(3),PKG:parseFloat(i).toFixed(3),GW:parseFloat(s).toFixed(3)}}return!1}(e),c=o(e);return a||(n||(r||(s||(c||(l||(t||void 0))))))}},796:function(e,a,t){"use strict";var o=t(0),n=t.n(o),r=t(440),l=t(1),s=t(48);a.a=function(e){var a,t,o;return n.a.createElement("div",{className:Object(l.Db)()?"col-md-".concat(null!==(a=e.width)&&void 0!==a?a:3," form-group"):"col-md-".concat(null!==(t=e.width)&&void 0!==t?t:3," form-group d-none")},n.a.createElement(r.a,{name:null!==(o=e.name)&&void 0!==o?o:"qty",label:"Quantity",type:"number",normalize:l.e,component:s.b}))}},804:function(e,a,t){"use strict";var o=t(0),n=t.n(o),r=t(440),l=t(441),s=t(184),c=t(1),i=t(48);a.a=Object(l.a)({form:"authorizationForm"})((function(e){return Object(c.Cb)()?e.isUpperThan?e.kadar>e.prevKadar?e.statusAuth?n.a.createElement(s.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement("hr",null),n.a.createElement("div",{className:"col-lg-12 row justify-content-end"},n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement(r.a,{name:"user_id",label:"User ID",type:"text",component:i.b})),n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement(r.a,{name:"password",label:"Password",type:"password",component:i.b})),n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement("label",{htmlFor:""},"\xa0"),n.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return e.handleOtorisasi()}},"Otorisasi")))):n.a.createElement(s.a,null):e.kadar<e.prevKadar?e.statusAuth?n.a.createElement(s.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement("hr",null),n.a.createElement("div",{className:"col-lg-12 row justify-content-end"},n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement(r.a,{name:"user_id",label:"User ID",type:"text",component:i.b})),n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement(r.a,{name:"password",label:"Password",type:"password",component:i.b})),n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement("label",{htmlFor:""},"\xa0"),n.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return e.handleOtorisasi()}},"Otorisasi")))):n.a.createElement(s.a,null):n.a.createElement(s.a,null)}))}}]);