(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[39],{793:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return c})),t.d(a,"a",(function(){return i}));var r=t(187),n=t(802),o=localStorage.getItem("namaTimbangan"),l=localStorage.getItem("enableTimbangan"),s=function(e){l&&r.a.database().ref(o).on("value",(function(a){var t=a.val();e("bruto",t.nilai)}))},c=function(e){var a=Object(n.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));a.on("connect",(function(){console.log("SOCKET CONNECTED : ",a.connected)}));var t=localStorage.getItem("username");a.on("timbangan-emit",(function(a){var r;(null===(r=a.user_id)||void 0===r?void 0:r.toLowerCase())===(null===t||void 0===t?void 0:t.toLowerCase())&&(localStorage.setItem("timbangan-active","true"),e(document.activeElement.name,a.value))}))},i=function(){var e=Object(n.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));localStorage.setItem("timbangan-active","false"),e.disconnect()}},795:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var r=function(e){if(!(e.indexOf(" ")>0||e.indexOf("-")>0||e.indexOf("//")>0||e.indexOf("/")>0))return!1;var a=0,t=0;return e.indexOf("-")>0?(a=parseFloat(e.split("-")[0]).toFixed(3),{NW:t=parseFloat(e.split("-")[1]).toFixed(3),GW:a,PKG:(parseFloat(a)-parseFloat(t)).toFixed(3)}):e.indexOf("//")>0&&void function(e){var a=0,t=0,r=0;if(e.indexOf("//")>0){n(e.split("//"))}else{if(!(e.indexOf("/")>0)){var o=e.split(" ");return a=parseFloat(o[0]).toFixed(3),t=parseFloat(o[1]).toFixed(3),r=(parseFloat(a)-parseFloat(t)).toFixed(3),{GW:a,NW:t,PKG:r}}n(e.split("/"))}}(e)};function n(e){var a,t;return a=parseFloat(e[0].trim()).toFixed(3),{NW:t=parseFloat(e[1].trim()).toFixed(3),GW:a,PKG:(parseFloat(a)-parseFloat(t)).toFixed(3)}}var o=function(e){var a=function(e){if("4"===e.charAt(0)||"5"===e.charAt(0)&&"0000"===e.slice(-4)){var a=e.charAt(0),t=e.substr(1,a)/1e3,r=e.substr(Number(a)+1,1),n=e.substr(Number(a)+2,r)/1e3,o=parseFloat(t)-parseFloat(n);return{NW:parseFloat(n).toFixed(3),PKG:parseFloat(o).toFixed(3),GW:parseFloat(t).toFixed(3)}}if(22===e.length&&"0"===e.substr(0,1)){var l=parseFloat(e.substr(13,5))/100,s=parseFloat(e.substr(18,4))/100,c=l+s;return{NW:parseFloat(l).toFixed(3),PKG:parseFloat(s).toFixed(3),GW:parseFloat(c).toFixed(3)}}if(20===e.length){var i=e.substr(8,6)/100,m=e.substr(14,6)/100,p=m-i;return{NW:parseFloat(i).toFixed(3),PKG:parseFloat(p).toFixed(3),GW:parseFloat(m).toFixed(3)}}if(14===e.length){var d=e.substr(1,4)/1e3,u=e.substr(6,4)/1e3,b=d-u;return{NW:parseFloat(u).toFixed(3),PKG:parseFloat(b).toFixed(3),GW:parseFloat(d).toFixed(3)}}}(e),t=function(e){var a=e.indexOf("X");if(12===e.length-1-a&&"0"!==e.substr(1,1)){console.log(e.substr(a+7,5));var t=parseFloat(e.substr(a+1,7))/100,r=parseFloat(e.substr(a+8,5))/100;return{NW:t-r,PKG:r,GW:t}}return!1}(e),n=function(e){if("#"===e.substr(5,1)){var a,t,r;return r=(t=parseFloat(e.split("#")[0]).toFixed(3)/100)-(a=parseFloat(e.split("#")[1]).toFixed(3)/100),console.log(e),{NW:a,GW:t,PKG:r}}return!1}(e),o=function(e){if("LLP"===e.substr(0,3)){console.log("INI DI LLP");var a=e.split("-"),t=a[1].substr(0,a[1].length-1),r=a[2].substr(0,a[2].length-1);return{NW:r,PKG:parseFloat(t)-parseFloat(r),GW:t}}return!1}(e),l=function(e){if(15===e.length||14===e.length||16===e.length){var a=e.charAt(0),t=e.charAt(Number(a)+1),r=e.substr(1,a)/1e3,n=e.substr(Number(a)+2,t)/1e3,o=r-n;return{NW:parseFloat(n).toFixed(3),PKG:parseFloat(o).toFixed(3),GW:parseFloat(r).toFixed(3)}}return!1}(e),s=function(e){if(-1!==e.indexOf("//")){var a=e.split("//")[0],t=e.split("//")[1],r=Number(a)-Number(t);return console.log(parseFloat(t).toFixed(3),parseFloat(r).toFixed(3),parseFloat(a).toFixed(3)),{NW:parseFloat(t).toFixed(3),PKG:parseFloat(r).toFixed(3),GW:parseFloat(a).toFixed(3)}}if(-1!==e.indexOf("-")){if(-1!==e.indexOf("ayu")||-1!==e.indexOf("AYU")){var n=e.split("-")[1],o=e.split("-")[2],l=Number(n)-Number(o);return{NW:parseFloat(o).toFixed(3),PKG:parseFloat(l).toFixed(3),GW:parseFloat(n).toFixed(3)}}var s=e.split("-")[0],c=e.split("-")[1],i=Number(s)-Number(c);return{NW:parseFloat(c).toFixed(3),PKG:parseFloat(i).toFixed(3),GW:parseFloat(s).toFixed(3)}}return!1}(e),c=r(e);return a||(n||(o||(s||(c||(l||(t||void 0))))))}},796:function(e,a,t){"use strict";var r=t(0),n=t.n(r),o=t(440),l=t(1),s=t(48);a.a=function(e){var a,t,r;return n.a.createElement("div",{className:Object(l.Db)()?"col-md-".concat(null!==(a=e.width)&&void 0!==a?a:3," form-group"):"col-md-".concat(null!==(t=e.width)&&void 0!==t?t:3," form-group d-none")},n.a.createElement(o.a,{name:null!==(r=e.name)&&void 0!==r?r:"qty",label:"Quantity",type:"number",normalize:l.e,component:s.b}))}},804:function(e,a,t){"use strict";var r=t(0),n=t.n(r),o=t(440),l=t(441),s=t(184),c=t(1),i=t(48);a.a=Object(l.a)({form:"authorizationForm"})((function(e){return Object(c.Cb)()?e.isUpperThan?e.kadar>e.prevKadar?e.statusAuth?n.a.createElement(s.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement("hr",null),n.a.createElement("div",{className:"col-lg-12 row justify-content-end"},n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement(o.a,{name:"user_id",label:"User ID",type:"text",component:i.b})),n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement(o.a,{name:"password",label:"Password",type:"password",component:i.b})),n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement("label",{htmlFor:""},"\xa0"),n.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return e.handleOtorisasi()}},"Otorisasi")))):n.a.createElement(s.a,null):e.kadar<e.prevKadar?e.statusAuth?n.a.createElement(s.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement("hr",null),n.a.createElement("div",{className:"col-lg-12 row justify-content-end"},n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement(o.a,{name:"user_id",label:"User ID",type:"text",component:i.b})),n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement(o.a,{name:"password",label:"Password",type:"password",component:i.b})),n.a.createElement("div",{className:"col-md-3 form-group"},n.a.createElement("label",{htmlFor:""},"\xa0"),n.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return e.handleOtorisasi()}},"Otorisasi")))):n.a.createElement(s.a,null):n.a.createElement(s.a,null)}))},923:function(e,a,t){"use strict";t.r(a);var r=t(52),n=t(53),o=t(309),l=t(54),s=t(55),c=t(0),i=t.n(c),m=t(440),p=t(441),d=t(460),u=t(33),b=t(304),h=t(793),g=t(48),f=t(23),k=t(1),v=t(20),F=t(795),E=t(183),O=t(804),N=t(312),j=t(796),x=t(45),y=t(58),K=t(841),_=Object(b.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),G=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).handleCheck=function(e){var a=e.target.value;clearTimeout(n.timer),n.timer=setTimeout((function(){var e=Object(F.a)(a);if(e&&(n.props.change("bruto",Object(k.D)(e.GW-e.PKG)),n.props.change("pkg",e.PKG),n.props.change("netto",n.props.netto),n.props.change("netto_ct",n.props.netto_ct),n.setState({}),Object(k.R)())){switch(n.props.from){case"terima":n.props.dispatch(Object(x.p)());break;case"return":n.props.dispatch(Object(y.q)());break;case"tolakan":n.props.dispatch(Object(K.a)())}Object(k.zb)("Kode Barcode")}}),150)},n.onclick1=n.onclick1.bind(Object(o.a)(n)),n.kodeBarangRef=i.a.createRef(),n.state={kodeBarang:[],DataSupplier:[],non_aksesoris:"col-lg-12 row",aksesoris:"col-lg-12 row d-none",kode_barang:"",keterangan:"INI KETERANGAN",kadar:"",P:"",K:"",bungkus:"",berat:"",harga:"",murni:"",ongkos:"",status:"",kadarCetak:"",kadarBeli:"",namaJenis:"",kodeJenis:"",needAuth:!1},n}return Object(n.a)(t,[{key:"componentDidMount",value:function(){Object(k.qb)(),Object(h.c)(this.props.change),this.props.dispatch(Object(N.c)())}},{key:"componentWillUnmount",value:function(){Object(h.a)()}},{key:"onclick1",value:function(){if(this.state.total_netto<this.props.netto)return Object(v.e)("Berat Melebihi Stock Tersedia"),!1;this.props.change("netto",this.props.netto),this.props.change("netto_ct",this.props.netto_ct),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross)}},{key:"pilihBarang",value:function(e){var a,t=this.props.listKodeBarang.find((function(a){return a.kode_jenis===e}));this.setState({kodeJenis:e,namaJenis:t.nama_jenis,kadarCetak:t.kadar_cetak,kadarBeli:t.kadar_beli,kodeKategori:t.kode_kategori}),this.props.change("keterangan",t.nama_jenis),this.props.change("kadar",t.kadar_cetak),this.props.change("kadarTransaksi",t.kadar_beli),this.props.change("initKadarTransaksi",t.kadar_beli),this.props.change("kode_kategori",t.kode_kategori),this.props.change("tambahan_kadar",null!==(a=t.tambahan_kadar)&&void 0!==a?a:0),Object(k.zb)(Object(k.cb)()?"Bungkus (Gr)":Object(k.R)()?"Kode Barcode":"Plastik")}},{key:"handleDiscount",value:function(){var e=Object(k.Fb)(this.props.bruto*(this.props.disc/100)||0,3);console.log(e);var a=(Object(k.a)(this.props.netto)-e||0).toFixed(3),t=(Object(k.a)(this.props.netto_ct)-e||0).toFixed(3);this.props.change("netto",Object(k.D)(a)),this.props.change("netto_ct",Object(k.D)(t)),this.props.change("disc_gr",Object(k.D)(e)),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross)}},{key:"compareKadar",value:function(){var e=this.props.prevKadar;this.props.kadar<e&&this.setState({needAuth:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement(E.a,{onSubmit:this.props.handleSubmit},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12 col-lg-12 d-none"},i.a.createElement(m.a,{name:"noFaktur",label:this.props.noFaktur,type:"text",readOnly:!0,component:g.b,defaultValue:this.props.noFaktur,normalize:function(e){return e&&e.toUpperCase()}})),i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(m.a,{name:"kode_barcode",label:"Kode Barcode",type:"tel",tabIndex:1,component:g.b,onChange:this.handleCheck})),i.a.createElement("div",{className:"col-lg-8"}),i.a.createElement("div",{className:"col-md-4 form-group"},this.props.listKodeBarang.length>0?i.a.createElement(m.a,{label:"Kode Model",name:"kodeJenis",defaultRef:this.kodeBarangRef,component:Object(k.cb)()?g.d:g.c,options:this.props.listKodeBarang.map((function(e){return{value:e.kode_jenis,name:e.kode_jenis+" / "+e.nama_jenis}})),onChange:function(a){return e.pilihBarang(Object(k.cb)()?a:a.value)},placeholder:"Silahkan Pilih"}):i.a.createElement(f.a,{label:"Kode Model"})),i.a.createElement("div",{className:"col-md-8 form-group",style:"terima"===this.props.from?null:{visibility:"hidden"}},i.a.createElement(m.a,{name:"keterangan",label:"Keterangan",type:"text",component:g.b,normalize:function(e){return e&&e.toUpperCase()}})),i.a.createElement("div",{className:this.state.non_aksesoris},i.a.createElement("div",{className:Object(k.cb)()?"col-md-3 form-group d-none":"col-md-3 form-group"},i.a.createElement(m.a,{name:"kadar",label:"Kadar Cetak",type:"text",component:g.b,readOnly:!0})),i.a.createElement("div",{className:Object(k.cb)()?"col-md-3 form-group d-none":"col-md-3 form-group"},i.a.createElement(m.a,{name:"p",label:"Plastik",type:"number",normalize:k.c,component:g.b})),i.a.createElement("div",{className:Object(k.cb)()?"col-md-3 form-group d-none":"col-md-3 form-group"},i.a.createElement(m.a,{name:"k",label:"Kertas",type:"number",normalize:k.c,component:g.b})),i.a.createElement("div",{className:Object(k.T)()?"col-md-3 form-group":"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"tambahan_kadar",label:"Tambahan kadar",type:"number",component:g.b})),i.a.createElement("div",{className:"col-md-3 form-group"},i.a.createElement(m.a,{name:"pkg",label:"Bungkus (Gr)",type:"text",component:g.b,onBlur:this.onclick1(),normalize:k.g})),i.a.createElement("div",{className:Object(k.w)("col-md-3 form-group")},i.a.createElement(m.a,{name:"qty",label:"Quantity",type:"number",component:g.b})),i.a.createElement(j.a,null),i.a.createElement("div",{className:"col-md-3 form-group"},i.a.createElement(m.a,{name:"bruto",label:"Berat (Gr)",type:"text",component:g.b,onBlur:this.onclick1(),normalize:k.g})),i.a.createElement("div",{className:"col-md-3 form-group"},i.a.createElement(m.a,{name:"kadarTransaksi",label:"Kadar Beli",type:"number",component:g.b,onBlur:this.onclick1(),readOnly:Object(k.z)()})),i.a.createElement("div",{className:"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"initKadarTransaksi",label:"Kadar Beli",type:"number",component:g.b,readOnly:Object(k.z)()})),i.a.createElement("div",{className:Object(k.cb)()?"col-md-3 form-group d-none":Object(k.i)("col-md-3 form-group")},i.a.createElement(m.a,{name:"disc",label:"Discount (%)",type:"number",component:g.b,onChange:this.handleDiscount(),onBlur:this.handleDiscount(),readOnly:"terima"!==this.props.from})),i.a.createElement("div",{className:Object(k.cb)()?"col-md-3 form-group d-none":Object(k.i)("col-md-3 form-group")},i.a.createElement(m.a,{name:"disc_gr",label:"Discount (Gr)",type:"number",readOnly:!0,component:g.b,onChange:this.handleDiscount()})),i.a.createElement("div",{className:"col-md-3 form-group"},i.a.createElement(m.a,{name:"gross",label:"Gross (Gr)",type:"tel",component:g.b,readOnly:!0})),i.a.createElement("div",{className:"col-md-3 form-group"},i.a.createElement(m.a,{name:"netto",label:"Murni (Gr)",type:"tel",component:g.b,readOnly:!0})),i.a.createElement("div",{className:Object(k.w)("col-md-3 form-group")},i.a.createElement(m.a,{name:"netto_ct",label:"Murni (CT)",type:"tel",component:g.b,readOnly:!0})),i.a.createElement("div",{className:"col-md-3 form-group d-none"},i.a.createElement(m.a,{name:"kode_kategori",label:"Kode Kategori",type:"number",component:g.b,readOnly:!0})),i.a.createElement("div",{className:"col-md-3 form-group"},i.a.createElement("label",{htmlFor:""},"Ongkos (Rp)"),i.a.createElement(m.a,Object.assign({name:"rp",component:"input",type:"tel",className:"form-control"},_)))),i.a.createElement("div",{className:this.state.aksesoris},i.a.createElement("div",{className:"col-md-4 form-group"},i.a.createElement(m.a,{name:"qty",label:"QTY",type:"number",component:g.b})),i.a.createElement("div",{className:"col-md-4 form-group"},i.a.createElement("label",{htmlFor:""},"Harga Beli (Rp)"),i.a.createElement(m.a,Object.assign({name:"harga_beli",component:"input",type:"tel",className:"form-control"},_)))),i.a.createElement("div",{className:"col-md-12 form-group mt-3"},i.a.createElement(O.a,{kadar:this.props.kadar,prevKadar:this.props.prevKadar,statusAuth:this.props.statusAuth,isUpperThan:!0,handleOtorisasi:function(){return e.props.dispatch(Object(N.b)())}}))))}}]),t}(c.Component);G=Object(p.a)({form:"TerimaSupplier",enableReinitialize:!0})(G);var W=Object(d.a)("TerimaSupplier");a.default=Object(u.b)((function(e){var a=W(e,"bruto","disc","disc_gr","kadarTransaksi","tambahan_kadar","initKadarTransaksi","pkg"),t=a.bruto,r=a.kadarTransaksi,n=a.pkg,o=a.disc,l=a.disc_gr,s=a.initKadarTransaksi,c=a.tambahan_kadar;return{netto:Object(k.D)(Number(t)*(Number(r)/100)||0),netto_ct:Object(k.D)(Number(t)*((Number(r)+Number(c||0))/100)||0),gross:Object(k.D)(Number(t)+Number(n)||0),bruto:t,disc:o||0,disc_gr:l||0,kadar:r,prevKadar:s,statusAuth:e.authorizationState.statusAuthorization,listKodeBarang:e.kodeBarangState.listKodeBarang||[],initialValues:{discGlobalPr:0,p:0,k:0,pkg:0,qty:1,bruto:0,kadar:0,disc:0,disc_gr:0,rp:0}}}))(G)}}]);