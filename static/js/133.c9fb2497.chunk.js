(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[133],{1270:function(e,t,a){"use strict";a.r(t);var n=a(52),r=a(53),i=a(54),l=a(55),o=a(0),c=a.n(o),p=a(12),s=a(302),m=a(182),u=a(33),g=a(440),d=a(441),b=a(460),h=a(51),_=a(290),f=a(5),v=a(48),k=a(3),E=a(20),N=a(304),O=Object(N.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),y=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateGr=function(){r.props.change("piutang_gr_akhir",r.props.piutang_gr_akhir)},r.state={},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(h.o)())}},{key:"updateTitipGr",value:function(){this.props.change("titip_gr_akhir",this.props.titip_gr_akhir)}},{key:"updateTitipRp",value:function(){this.props.change("titip_rp_akhir",this.props.titip_gr_akhir)}},{key:"updateRp",value:function(){this.props.change("piutang_rp_akhir",this.props.piutang_rp_akhir)}},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.props.handleSubmit},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(g.a,{name:"kode_customer",component:v.c,options:this.props.customer.map((function(e){return{value:e.kode_customer,name:e.nama_customer}})),type:"text",label:"Nama Toko",placeholder:"Masukan Nama Toko",disabled:!0})),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(g.a,{name:"kode_customer_tujuan",component:v.c,options:this.props.customer.map((function(e){return{value:e.kode_customer,name:e.nama_customer}})),type:"text",label:"Nama Toko Tujuan ",placeholder:"Masukan Nama Toko Tujuan"})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_gr",component:v.b,type:"text",label:"Piutang GR",placeholder:"Masukan Piutang GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"piutang_rp",component:v.b,type:"text",label:"Piutang RP",placeholder:"Masukan Piutang RP",readOnly:!0},O))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_gr",component:v.b,type:"text",label:"Titip GR",placeholder:"Masukan Titip GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"titip_rp",component:v.b,type:"text",label:"Titip RP",placeholder:"Masukan Titip RP",readOnly:!0},O))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_gr_ambil",component:v.b,type:"number",label:"Ambil Piutang GR",placeholder:"Masukan Piutang GR",onChange:this.updateGr()})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_rp_ambil",component:v.b,type:"number",label:"Ambil Piutang RP",placeholder:"Masukan Piutang RP",onChange:this.updateRp()})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_gr_ambil",component:v.b,type:"number",label:"Ambil Titip GR",placeholder:"Masukan Titip GR",onChange:this.updateTitipGr()})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_rp_ambil",component:v.b,type:"number",label:"Ambil Titip RP",placeholder:"Masukan Titip RP",onChange:this.updateTitipRp()})),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-11"},c.a.createElement("hr",null)),c.a.createElement("div",{className:"col-lg-1"},c.a.createElement("i",{className:"fa fa-minus"})))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_gr_akhir",component:v.b,type:"text",label:"Piutang GR",placeholder:"Masukan Piutang GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"piutang_rp_akhir",component:v.b,type:"text",label:"Piutang RP",placeholder:"Masukan Piutang RP",readOnly:!0},O))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_gr_akhir",component:v.b,type:"text",label:"Titip GR",placeholder:"Masukan Titip GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"titip_rp_akhir",component:v.b,type:"text",label:"Titip RP",placeholder:"Masukan Titip RP",readOnly:!0},O)))),c.a.createElement("div",{className:"col-lg-12 col-md-12 mt-2"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.props.onSend},this.props.onSend?c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Selesai",c.a.createElement("i",{className:"fa fa-paper-plane ml-3","aria-hidden":"true"})))))}}]),a}(o.Component);y=Object(d.a)({form:"TransferBalance",enableReinitialize:!0})(y);var j=Object(b.a)("TransferBalance"),T=Object(u.b)((function(e){var t=j(e,"piutang_gr","piutang_rp","titip_gr","titip_rp","piutang_gr_ambil","piutang_rp_ambil","titip_gr_ambil","titip_rp_ambil"),a=t.piutang_gr,n=t.piutang_rp,r=t.titip_gr,i=t.titip_rp,l=t.piutang_gr_ambil,o=t.piutang_rp_ambil,c=t.titip_gr_ambil,p=t.titip_rp_ambil;return{customer:e.customerState.listCustomer||[],titip_rp_akhir:parseFloat(i)-parseFloat(p||0),titip_gr_akhir:parseFloat(r)-parseFloat(c||0),piutang_rp_akhir:parseFloat(n)-parseFloat(o||0),piutang_gr_akhir:parseFloat(a)-parseFloat(l||0),initialValues:{piutang_gr:e.provinsi.listPiutangCustomer.piutang_gr,piutang_rp:e.provinsi.listPiutangCustomer.piutang_rp,titip_gr:e.provinsi.listPiutangCustomer.titip_gr,titip_rp:e.provinsi.listPiutangCustomer.titip_rp,kode_customer:e.provinsi.listPiutangCustomer.kode_customer,piutang_gr_ambil:0,piutang_rp_ambil:0,titip_gr_ambil:0,titip_rp_ambil:0}}}))(y),P=a(305),R=a(10),x=a(39),C=a(1),F=Object(N.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),G=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).inputChange=function(e){return function(t){r.setState(Object(m.a)({},e,t.target.value))}},r.state={columns:[{dataField:"tanggal",text:"Tanggal"},{dataField:"kode_customer",text:"Kode Customer"},{dataField:"piutang_gr",text:"Piutang GR",align:"right",headerAlign:"right"},{dataField:"piutang_rp",text:"Piutang RP",align:"right",headerAlign:"right"},{dataField:"titip_gr",text:"Titip GR",align:"right",headerAlign:"right"},{dataField:"titip_rp",text:"Titip RP",align:"right",headerAlign:"right"}],searchText:"",listCustomer:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(h.o)()),this.props.dispatch(Object(x.b)())}},{key:"onChange",value:function(){this.props.change("cashNetto",this.props.cashNetto),this.props.change("transferNetto",this.props.transferNetto)}},{key:"onSubmitToko",value:function(e){var t=this,a=e.split("|");this.props.change("kodeToko",a[0]),this.props.change("kodeCustomer",a[1]),this.props.dispatch(Object(_.c)(a[0],this.props.tanggal)),this.props.dispatch(Object(k.w)()),Object(f.b)("trx-transfer-balance/get-piutang-titipan/".concat(a[0],"&").concat(this.props.tanggal)).then((function(e){t.props.dispatch(Object(k.m)()),t.props.change("piutang_gr",e.data.piutang_gr),t.props.change("piutang_rp",e.data.piutang_rp),t.props.change("titip_gr",e.data.titip_gr),t.props.change("titip_rp",e.data.titip_rp)})).catch((function(e){return Object(E.c)("Gagal Ambil Data , Detial : ".concat(e)).then((function(){return t.props.dispatch(Object(k.m)())}))}))}},{key:"handleSubmit",value:function(e){var t=this;if(void 0===e.kode_customer_tujuan)return Object(E.e)("Mohon Isi Customer Tujuan"),!1;var a={no_transfer:this.props.noFaktur,tanggal:this.props.tanggal||Object(C.O)(),kode_customer_from:e.kode_customer,kode_customer_to:e.kode_customer_tujuan,total_jml_gr:e.piutang_gr_ambil,total_jml_rp:e.piutang_rp_ambil,total_titip_gr:e.titip_gr_ambil,total_titip_rp:e.titip_rp_ambil};Object(f.f)("trx-transfer-balance/simpan",a).then((function(){return Object(E.b)("Transfer Berhasil")})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return t.props.dispatch(Object(R.g)())})).then((function(){return t.props.dispatch(Object(x.b)())})).then((function(){return window.location.reload()})).catch((function(e){return Object(E.c)("Gagal Transfer, Detail : ".concat(e))}))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 col-lg-4"},c.a.createElement(g.a,{name:"tanggal",label:"Tanggal",type:"date",component:v.b})),c.a.createElement("div",{className:"col-md-4 col-lg-4 d-none"},c.a.createElement(g.a,{name:"kodeToko",component:v.b,type:"text",label:"Nama Toko"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(g.a,{name:"kode_customer",component:v.c,options:this.props.customer.map((function(e){return{value:e.kode_customer+"|"+e.nama_customer,name:e.nama_toko}})),onChange:function(t){return e.onSubmitToko(t)},type:"text",label:"Nama Toko",placeholder:"Masukan Nama Toko"})),c.a.createElement("div",{className:"col-md-4 col-lg-4"},c.a.createElement(g.a,{name:"kodeCustomer",component:v.b,type:"text",label:"Nama Customer",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"piutang_gr",component:v.b,type:"text",label:"Piutang GR",placeholder:"Masukan Piutang GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"piutang_rp",component:v.b,type:"text",label:"Piutang RP",placeholder:"Masukan Piutang RP",readOnly:!0},F))),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,{name:"titip_gr",component:v.b,type:"text",label:"Titip GR",placeholder:"Masukan Titip GR",readOnly:!0})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(g.a,Object.assign({name:"titip_rp",component:v.b,type:"text",label:"Titip RP",placeholder:"Masukan Titip RP",readOnly:!0},F))),c.a.createElement("div",{className:"col-lg-12 col-md-12 mt-2"},c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"btn btn-primary",type:"button",disabled:this.props.onSend,onClick:function(){return e.props.dispatch(Object(R.j)())}},this.props.onSend?c.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Transfer Balance"))),c.a.createElement(P.default,{content:c.a.createElement(T,{onSubmit:function(t){return e.handleSubmit(t)}}),title:"Transfer Balance"}))}}]),a}(o.Component);G=Object(d.a)({form:"FormTransferBalance",enableReinitialize:!0})(G);var M=Object(b.a)("FormTransferBalance"),S=Object(u.b)((function(e){var t=M(e,"harga","cash","transfer","tanggal"),a=t.harga,n=t.cash,r=t.transfer,i=t.tanggal;return{cashNetto:(parseFloat(n)/parseFloat(a)).toFixed(3),transferNetto:(parseFloat(r)/parseFloat(a)).toFixed(3),customer:e.customerState.listCustomer||[],piutang_gr:e.provinsi.listPiutangCustomer.piutang_gr,piutang_rp:e.provinsi.listPiutangCustomer.piutang_rp,titip_gr:e.provinsi.listPiutangCustomer.titip_gr,titip_rp:e.provinsi.listPiutangCustomer.titip_rp,tanggal:i,onSend:e.provinsi.onSend,noFaktur:e.provinsi.noFaktur,initialValues:{tanggal:Object(C.O)()}}}))(G),A=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"handlSubmit",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"col-lg-12 col-d-12"},c.a.createElement("ol",{className:"breadcrumb mb-2"},c.a.createElement(p.b,{to:"/KlasifikasiCustomer"},c.a.createElement("button",{type:"button",className:"btn btn-secondary"},c.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," Back"))),c.a.createElement("div",{className:"card"},c.a.createElement(s.a,{title:"Transfer Balance Customer"}),c.a.createElement("div",{className:"card-body"},c.a.createElement(S,{onSubmit:function(t){return e.handlSubmit(t)}})))))}}]),a}(o.Component);t.default=A},460:function(e,t,a){"use strict";var n=a(97),r=a.n(n),i=a(29);t.a=function(e){var t=e.getIn;return function(e,a){r()(e,"Form value must be specified");var n=a||function(e){return t(e,"form")};return function(a){for(var l=arguments.length,o=new Array(l>1?l-1:0),c=1;c<l;c++)o[c-1]=arguments[c];return r()(o.length,"No fields specified"),1===o.length?t(n(a),e+".values."+o[0]):o.reduce((function(r,l){var o=t(n(a),e+".values."+l);return void 0===o?r:i.a.setIn(r,l,o)}),{})}}}(i.a)}}]);