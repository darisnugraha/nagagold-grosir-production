(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[160],{1145:function(e,a,t){"use strict";t.r(a);var r=t(52),s=t(53),o=t(54),i=t(55),n=t(0),p=t.n(n),l=t(33),c=t(440),d=t(441),m=t(460),u=t(304),h=t(48),g=t(96),k=t.n(g),b=t(5),f=t(1),_=t(20),y=t(116),v=t(246),E=t(303),N=t(308),R=t(211),O=Object(u.createNumberMask)({prefix:"Rp. ",suffix:",-",locale:"id-ID"}),j=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(e){var s;return Object(r.a)(this,t),(s=a.call(this,e)).state={kodeBarang:[],qty:!1,isEmpty:!0,columns:[{dataField:"kode_reparasi",text:"Kode Reparasi"},{dataField:"ongkos_reparasi",text:"Ongkos Reparasi",formatter:function(e){return Object(f.G)(e)}},{dataField:"qty",text:"Qty",formatter:function(e,a){return"QTY"===a.type_reparasi?e:0}},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(e,a,t){return p.a.createElement("div",{className:"justify-content-center row"},p.a.createElement("button",{"data-tip":!0,"data-for":"hapus",type:"button",className:"btn btn-danger mr-2",onClick:function(){return s.deleteRow(t)}},p.a.createElement(N.a,{id:"hapus",type:"dark",effect:"solid"},p.a.createElement("span",null,"Hapus")),p.a.createElement("i",{className:"fa fa-trash mr-1"})),p.a.createElement("br",null),p.a.createElement("button",{"data-tip":!0,"data-for":"edit",type:"button",className:"btn btn-warning mr-2",onClick:function(){return s.editRow(a,t)}},p.a.createElement(N.a,{id:"edit",type:"dark",effect:"solid"},p.a.createElement("span",null,"Edit")),p.a.createElement("i",{className:"fa fa-recycle","aria-hidden":"true"})))}}]},s}return Object(s.a)(t,[{key:"editRow",value:function(e,a){this.props.change("kodeReparasi",e.kode_reparasi+"|"+e.ongkos_reparasi+"|"+e.type_reparasi),this.props.change("qty",e.qty),this.props.change("ongkos_reparasi",e.ongkos_reparasi),this.setState({qty:"QTY"===e.type_reparasi,type_reparasi:e.type_reparasi})}},{key:"deleteRow",value:function(e){var a=JSON.parse(localStorage.getItem("temp_data_reparasi"))||[];a.splice(e,1),localStorage.setItem("temp_data_reparasi",JSON.stringify(a)),this.props.dispatch(Object(R.e)())}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(R.e)()),this.props.dispatch(Object(y.j)()),this.props.dispatch(Object(v.c)()),JSON.parse(localStorage.getItem("temp_data_reparasi")||"[]").length<1?this.setState({isEmpty:!0}):this.setState({isEmpty:!1})}},{key:"onclick1",value:function(){this.props.change("netto",this.props.netto),this.props.change("noFaktur",this.props.noFaktur),this.props.change("gross",this.props.gross),this.props.change("discGlobalGr",this.props.discGlobalGr),this.props.change("nettoDiscGlobalExt",(this.props.netto-this.props.discGlobalGr).toFixed(3))}},{key:"pilihBarang",value:function(e){var a=this,t="LEVEL2"===this.props.level_customer?localStorage.getItem("customer_1"):this.props.kode_customer;Object(b.b)("ongkos-reparasi/get/:kode_customer&:kode_reparasi".concat(t,"&").concat(e)).then((function(e){var t,r;a.props.change("rp",null===(t=e.data)||void 0===t?void 0:t.ongkos_reparasi),a.props.change("kodeKategori",null===(r=e.data)||void 0===r?void 0:r.kode_kategori)})).catch((function(e){return Object(_.e)(e.data)})),Object(f.zb)("qty")}},{key:"setBruto",value:function(){this.props.change("bruto",localStorage.getItem("Timbangan"))}},{key:"handleReparasi",value:function(e){var a=e.split("|"),t=a[2];this.setState({qty:"QTY"===t,type_reparasi:t}),this.props.change("ongkos_reparasi",a[1])}},{key:"addReparasi",value:function(){var e=this;if(0===Number(this.props.bruto))return Object(_.e)("Silahkan isi Bruto"),!1;if(void 0===this.props.kodeBarang)return Object(_.e)("Silahkan Pilih Kategori"),!1;var a=JSON.parse(localStorage.getItem("temp_data_reparasi")||"[]"),t="";if(a.length<1)t=[{kode_jenis:this.props.kodeBarang,bruto:this.props.bruto,detail_reparasi:[{kode_reparasi:this.props.kodeReparasi.split("|")[0],ongkos_reparasi:this.props.ongkos_reparasi,type_reparasi:this.state.type_reparasi,qty:this.props.qty}]}];else{var r=this.props.kodeBarang,s=a.findIndex((function(e){return e.kode_jenis===r}));if(s<0)t={kode_jenis:this.props.kodeBarang,bruto:this.props.bruto,detail_reparasi:[{kode_reparasi:this.props.kodeReparasi.split("|")[0],ongkos_reparasi:this.props.ongkos_reparasi,type_reparasi:this.state.type_reparasi,qty:this.props.qty}]},a.push(t),t=a;else{var o=a[s].detail_reparasi.findIndex((function(a){return a.kode_reparasi===e.props.kodeReparasi.split("|")[0]}));o<0||a[s].detail_reparasi.splice(o,1),a[s].detail_reparasi.push({kode_reparasi:this.props.kodeReparasi.split("|")[0],ongkos_reparasi:this.props.ongkos_reparasi,type_reparasi:this.state.type_reparasi,qty:this.props.qty}),t=a}}localStorage.setItem("temp_data_reparasi",JSON.stringify(t)),this.props.dispatch(Object(R.e)())}},{key:"render",value:function(){var e,a=this;return p.a.createElement("form",{onSubmit:this.props.handleSubmit},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-md-12 col-lg-12 d-none"},p.a.createElement(c.a,{name:"noFaktur",label:this.props.noFaktur,type:"text",readOnly:!0,component:h.b,defaultValue:this.props.noFaktur,normalize:function(e){return e&&e.toUpperCase()}})),p.a.createElement("div",{className:"col-md-4 col-lg-4"},""!==String(this.props.KategoriList)?p.a.createElement(c.a,{name:"kodeBarang",label:"Kode Model",component:h.c,className:"form-control",options:this.props.KategoriList.map((function(e){return{value:e.kode_kategori,name:e.nama_kategori}}))}):p.a.createElement(k.a,{width:"100%",height:50})),p.a.createElement("div",{className:"col-md-3 col-lg-3"},p.a.createElement(c.a,{name:"bruto",label:"Berat (Gr)",type:"number",component:h.b,onChange:this.onclick1(),normalize:f.c})),p.a.createElement("div",{className:"col-md-3 col-lg-3 d-none"},p.a.createElement(c.a,{name:"kodeKategori",label:"Berat (Gr)",type:"number",component:h.b,onChange:this.onclick1()})),p.a.createElement("div",{className:"col-lg-12"},p.a.createElement("hr",null)),p.a.createElement("div",{className:"col-lg-12"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-lg-3"},""!==String(this.props.ParameterReparasi)?p.a.createElement(c.a,{name:"kodeReparasi",label:"Kode Reparasi",component:h.c,className:"form-control",onChange:function(e){return a.handleReparasi(e)},options:this.props.ParameterReparasi.filter((function(e){return e.kode_customer===a.props.kode_customer})).map((function(e){return{value:e.kode_reparasi+"|"+e.ongkos_reparasi+"|"+e.type_reparasi,name:e.kode_reparasi}}))}):p.a.createElement(k.a,{width:"100%",height:50})),p.a.createElement("div",{className:this.state.qty?"col-md-3 col-lg-3":"col-md-3 col-lg-3 d-none"},p.a.createElement(c.a,{name:"qty",label:"Qty",type:"number",component:h.b})),p.a.createElement("div",{className:"col-md-3 col-lg-3"},p.a.createElement(c.a,Object.assign({name:"ongkos_reparasi",label:"Ongkos reparasi",type:"telp",component:h.b},O))),p.a.createElement("div",{className:"col-lg-12 row justify-content-end"},p.a.createElement("div",{className:"col-lg-2"},p.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return a.addReparasi()}},"Tambah Reparasi"))),p.a.createElement("div",{className:"col-lg-12"},p.a.createElement("br",null)),p.a.createElement("div",{className:"col-lg-12"},p.a.createElement(E.a,{keyField:"id",data:null===(e=this.props.reparasi_list.filter((function(e){return e.kode_jenis===a.props.kodeBarang}))[0])||void 0===e?void 0:e.detail_reparasi,columns:this.state.columns})))),p.a.createElement("div",{className:"col-lg-12 col-md-12"},p.a.createElement("div",{className:"text-right"},p.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Simpan")))))}}]),t}(n.Component);j=Object(d.a)({form:"FormTransaksiReparasi",enableReinitialize:!0})(j);var S=Object(m.a)("FormTransaksiReparasi");a.default=Object(l.b)((function(e){var a=S(e,"bruto","rp","kodeReparasi","ongkos_reparasi","qty","kodeBarang","bruto"),t=a.bruto,r=a.rp,s=a.kodeReparasi,o=a.ongkos_reparasi,i=a.qty,n=a.kodeBarang;return{bruto:t,rp:r,KategoriList:e.kategoriState.listKategori||[],reparasi_list:e.provinsi.reparasi_barang,kodeReparasi:s,ongkos_reparasi:o,qty:i,kodeBarang:n,ParameterReparasi:e.provinsi.ParameterReparasi||[],initialValues:{discGlobalPr:0,p:0,k:0,pkg:0,bruto:0}}}))(j)},460:function(e,a,t){"use strict";var r=t(97),s=t.n(r),o=t(29);a.a=function(e){var a=e.getIn;return function(e,t){s()(e,"Form value must be specified");var r=t||function(e){return a(e,"form")};return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),p=1;p<i;p++)n[p-1]=arguments[p];return s()(n.length,"No fields specified"),1===n.length?a(r(t),e+".values."+n[0]):n.reduce((function(s,i){var n=a(r(t),e+".values."+i);return void 0===n?s:o.a.setIn(s,i,n)}),{})}}}(o.a)}}]);