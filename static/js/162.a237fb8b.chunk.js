/*! For license information please see 162.a237fb8b.chunk.js.LICENSE.txt */
(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[162],{1295:function(t,e,a){"use strict";a.r(e);var r=a(182),n=a(52),o=a(53),l=a(54),i=a(55),c=a(0),s=a.n(c),d=a(33),u=a(4),m=a(440),p=a(441),g=a(39),h=a(15),b=a.n(h),f=a(61),v=a(3),k=a(57),_=a(20),y=a(308),N=a(77),j=a(96),O=a.n(j),S=a(10),E=a(302),F=a(5),x=a(303),B=a(48),I=a(210),D=a(23),w=a(6),A=a(43),T=a(1);function L(){L=function(){return t};var t={},e=Object.prototype,a=e.hasOwnProperty,r=Object.defineProperty||function(t,e,a){t[e]=a.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(x){c=function(t,e,a){return t[e]=a}}function s(t,e,a,n){var o=e&&e.prototype instanceof m?e:m,l=Object.create(o.prototype),i=new S(n||[]);return r(l,"_invoke",{value:y(t,a,i)}),l}function d(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(x){return{type:"throw",arg:x}}}t.wrap=s;var u={};function m(){}function p(){}function g(){}var h={};c(h,o,(function(){return this}));var b=Object.getPrototypeOf,f=b&&b(b(E([])));f&&f!==e&&a.call(f,o)&&(h=f);var v=g.prototype=m.prototype=Object.create(h);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var n;r(this,"_invoke",{value:function(r,o){function l(){return new e((function(n,l){!function r(n,o,l,i){var c=d(t[n],t,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==typeof u&&a.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,l,i)}),(function(t){r("throw",t,l,i)})):e.resolve(u).then((function(t){s.value=t,l(s)}),(function(t){return r("throw",t,l,i)}))}i(c.arg)}(r,o,n,l)}))}return n=n?n.then(l,l):l()}})}function y(t,e,a){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return F()}for(a.method=n,a.arg=o;;){var l=a.delegate;if(l){var i=N(l,a);if(i){if(i===u)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var c=d(t,e,a);if("normal"===c.type){if(r=a.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(r="completed",a.method="throw",a.arg=c.arg)}}}function N(t,e){var a=e.method,r=t.iterator[a];if(void 0===r)return e.delegate=null,"throw"===a&&t.iterator.return&&(e.method="return",e.arg=void 0,N(t,e),"throw"===e.method)||"return"!==a&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+a+"' method")),u;var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(a.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:F}}function F(){return{value:void 0,done:!0}}return p.prototype=g,r(v,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:p,configurable:!0}),p.displayName=c(g,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},k(_.prototype),c(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,a,r,n,o){void 0===o&&(o=Promise);var l=new _(s(e,a,r,n),o);return t.isGeneratorFunction(a)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},k(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),a=[];for(var r in e)a.push(r);return a.reverse(),function t(){for(;a.length;){var r=a.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(a,r){return l.type="throw",l.arg=t,e.next=a,r&&(e.method="next",e.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],l=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=t,l.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(l)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),O(a),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var n=r.arg;O(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:E(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}var G=function(t){Object(l.a)(a,t);var e=Object(i.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).handleBarcode=function(){var t=Object(w.a)(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(F.b)("barang-set/get-by-kode-barcode-set-active/"+e).then((function(t){t.data.detail_barang.forEach((function(t){var e=JSON.parse(localStorage.getItem("barcode_barangSet_level1"))||[],a=e.findIndex((function(e){return e.kode_kategori===t.kode_kategori}));if(-1!==a){var r={netto_disc:Object(T.D)(parseFloat(t.netto_disc||0)+parseFloat(e[a].netto_disc),3),netto:Object(T.D)(parseFloat(t.netto||0)+parseFloat(e[a].netto),3),ongkos_rp:Object(T.G)(parseFloat(void 0===t.ongkos_rp?0:t.ongkos_rp)+e[a].ongkos_rp),disc:Object(T.D)(parseFloat(t.disc||0)+parseFloat(e[a].disc)),bruto:Object(T.D)(parseFloat(t.bruto||0)+parseFloat(e[a].bruto)),kode_kategori:t.kode_kategori,kode_tukar:t.kode_tukar,kode_kelompok:t.kode_kelompok,keterangan:t.keterangan,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===t.harga_jual?0:t.harga_jual};e.push(r),e.splice(a,1),localStorage.setItem("barcode_barangSet_level1",JSON.stringify(e))}else{var n={netto_disc:Object(T.D)(parseFloat(t.netto_disc||0),3),netto:Object(T.D)(parseFloat(t.netto||0),3),ongkos_rp:parseFloat(void 0===t.ongkos_rp?0:t.ongkos_rp),disc:t.disc||0,bruto:Object(T.D)(parseFloat(t.bruto||0)),kode_kategori:t.kode_kategori,kode_kelompok:t.kode_kelompok,kode_tukar:t.kode_tukar,keterangan:t.keterangan,disc_persen:t.disc_persen||0,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===t.harga_jual?0:parseFloat(t.harga_jual)*parseFloat(t.qty)};e.push(n),localStorage.setItem("barcode_barangSet_level1",JSON.stringify(e))}}))}));case 2:r.printBarcode(e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.printBarcode=function(t){for(var e,a,r,n,o,l=JSON.parse(localStorage.getItem("barcode_barangSet_level1")),i=l.map((function(t){return parseFloat(t.netto_disc)})).reduce((function(t,e){return t+e}),0),c=null===(e=l[0])||void 0===e?void 0:e.kode_kelompok,s=null===(a=l[0])||void 0===a?void 0:a.kode_kategori,d=null===(r=l[0])||void 0===r?void 0:r.netto_disc,u=(null===(n=l[1])||void 0===n?void 0:n.kode_kategori)||"",m=(null===(o=l[2])||void 0===o?void 0:o.netto_disc)||"",p="",g="",h=2;h<l.length;h++)p+=(""===p?"":", ")+l[h].kode_kategori,g+=parseFloat(l[h].netto_disc);var b="";b+="I8,A\n",b+="ZN\n",b+="q652\n",b+="O\n",b+="JF\n",b+="\x1bKIZZQ0\n",b+="\x1bKI9+0.0\n",b+="ZT\n",b+="Q160,B25\n",b+="\x1bArg\x1b\x1blabel 200 31\n",b+="\x1b\x1bexit\n",b+="\x1bKI80\n",b+="N\n",b+='B226,106,2,1,1,2,27,N,"'.concat(t,'"\n'),b+='A226,74,2,1,1,1,N,"'.concat(t,'"\n'),b+='B226,56,2,1B,1,2,30,N,"-'.concat(Object(T.D)(i,3),"-").concat(Object(T.D)(i,3),'"\n'),b+='A226,21,2,1,1,1,N,"-'.concat(Object(T.D)(i,3),"-").concat(Object(T.D)(i,3),'"\n'),b+="LO408,83,218,3\n",b+="LO409,23,215,3\n",b+='A624,101,2,1,1,1,N,"'.concat(c,'"\n'),b+='A439,101,2,1,1,1,N,""\n',b+='A624,78,2,1,1,1,N,"'.concat(s,'"\n'),b+='A469,78,2,1,1,1,N,"'.concat(Object(T.D)(d,3),'"\n'),(l.length=2)&&(b+='A624,61,2,1,1,1,N,"'.concat(u,'"\n'),b+='A469,61,2,1,1,1,N,"'.concat(""===m?"":Object(T.D)(m,3),'"\n')),(l.length=3)&&(b+='A624,42,2,1,1,1,N,"'.concat(p,'"\n'),b+='A460,42,2,1,1,1,N,"'.concat(""===g?"":Object(T.D)(g,3),'"\n')),b+='A626,18,2,1,1,1,N,"Total"\n',b+='A470,18,2,1,1,1,N,"'.concat(Object(T.D)(i,3),'"\n'),b+="P1\n",document.getElementById("myInput").value=b;var f=document.createElement("a"),v=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});f.href=URL.createObjectURL(v),f.download="autoprint_barcode.txt",document.body.appendChild(f),f.click()},r.state={detail:[],columns:[{dataField:"kode_barcode_set",text:"Kode Barcode"},{dataField:"total_bruto",text:"Total Bruto",align:"right",headerAlign:"right"},{dataField:"total_netto",text:"Total Netto",align:"right",headerAlign:"right"},{dataField:"status_active",text:"Status",align:"center",formatter:function(t,e){return!0===e.status_active?s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-3"}),s.a.createElement("div",{className:"badge-pill badge-success col-lg-6 text-center"},"AVAILABLE"))):s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-3"}),s.a.createElement("div",{className:"badge-pill badge-danger col-lg-6 text-center"},"NOT-AVAILABLE")))}},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(t,e){return s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 text-center"},s.a.createElement("button",{className:"btn btn-warning mr-2","data-tut":"reactour_3",type:"button",onClick:function(){return r.print(e)}},"Print")),s.a.createElement("div",{className:"col-lg-6 text-center"},s.a.createElement("button",{className:"btn btn-outline-primary","data-tut":"reactour_3","data-toggle":"modal","data-target":"#detail_barangSet",onClick:function(){return r.setState({detail:e.detail_barang})}},"Detail"))))}}],columns2:[{dataField:"kode_jenis",text:"Kode Model"},{dataField:"kadar_cetak",text:"Cap\nKode",align:"right",headerAlign:"right"},{dataField:"pkg",text:"Bungkus\n(Gr)",align:"right",headerAlign:"right"},{dataField:"bruto",text:"Berat\n(Gr)",align:"right",headerAlign:"right"},{dataField:"kadar_jual",text:"Kode\nTukar",align:"right",headerAlign:"right"},{dataField:"netto",text:"Murni\n(Gr)",align:"right",headerAlign:"right",footerClasses:"sum-netto-terima-supplier"},{dataField:"disc_persen",text:"%",align:"right",headerAlign:"right",footerClasses:"sum-netto-terima-supplier"},{dataField:"disc",text:"Disc\n(Gr)",align:"right",headerAlign:"right",footerClasses:"sum-netto-terima-supplier"},{dataField:"netto_disc",text:"Netto\nDisc(Gr)",align:"right",headerAlign:"right"},{dataField:"ongkos_rp",text:"Ongkos\n(Rp)",align:"right",headerAlign:"right"}]},r}return Object(o.a)(a,[{key:"print",value:function(t){if("Label 2"===this.props.jenis_label)return this.handleBarcode(t.kode_barcode_set),!1;var e="";e+="<xpml><page quantity='0' pitch='35.0 mm'></xpml>I8,A\n",e+="ZN\n",e+="q504\n",e+="O\n",e+="JF\n",e+="\x1bKIZZQ0\n",e+="\x1bKI9+0.0\n",e+="ZT\n",e+="Q280,B25\n",e+="\x1bArg\x1b\x1blabel 350 31\n",e+="\x1b\x1bexit\n",e+="\x1bKI80\n",e+="<xpml></page></xpml><xpml><page quantity='1' pitch='35.0 mm'></xpml>N\n",e+='A400,275,2,2,1,2,N,"BARCODE SET"\n',e+='B350,238,2,1,1,10,73,N,"'.concat(t.kode_barcode_set,'"\n'),e+='A400,155,2,2,1,2,N,"'.concat(t.kode_barcode_set,'"\n'),e+='A400,107,2,2,1,2,N,"Bruto"\n',e+='A400,62,2,2,1,2,N,"Netto"\n',e+='A325,107,2,2,1,2,N,"'.concat(parseFloat(t.total_bruto).toFixed(3),'"\n'),e+='A325,62,2,2,1,2,N,"'.concat(parseFloat(t.total_netto).toFixed(3),'"\n'),e+="P1\n",e+="<xpml></page></xpml><xpml><end/></xpml>",document.getElementById("myInput").value=e;var a=document.createElement("a"),r=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(r),a.download="autoprint_barcode.txt",document.body.appendChild(a),a.click()}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(A.h)())}},{key:"render",value:function(){return s.a.createElement("div",{className:"col-lg-12 mt-2"},s.a.createElement("div",{id:"accordion",className:"custom-accordion mb-4"},s.a.createElement("div",{className:"card mb-0 bg-primary"},s.a.createElement("div",{className:"card-header",id:"headingOne"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("h5",{className:"m-0"},s.a.createElement("a",{className:"custom-accordion-title d-block pt-2 pb-2 text-white","data-toggle":"collapse",href:"#collapseBarangSet","aria-expanded":"true","aria-controls":"collapseBarangSet"},"List Barang Set"))))),s.a.createElement("div",{id:"collapseBarangSet",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordion"},s.a.createElement("div",{className:"card-body bg-white"},s.a.createElement("form",{onSubmit:this.props.handleSubmit},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"d-none"},s.a.createElement("textarea",{id:"myInput"})),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement(x.a,{keyField:"kodeJenis",data:this.props.BarangSet||[],columns:this.state.columns,textEmpty:"Silahkan Tambah Data Dengan Klik Tombol Biru Diatas"})))))))),s.a.createElement("div",{id:"detail_barangSet",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"primary-header-modalLabel","aria-hidden":"true"},s.a.createElement("div",{className:"modal-dialog modal-xl"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header modal-colored-header bg-primary"},s.a.createElement("h4",{className:"modal-title",id:"primary-header-modalLabel"},"Detail Barang Set"),s.a.createElement("button",{type:"button",id:"dismissModal",className:"close","data-dismiss":"modal","aria-hidden":"true"},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("div",{className:"col-lg-12"},s.a.createElement(x.a,{keyField:"kodeJenis",data:this.state.detail||[],columns:this.state.columns2,textEmpty:"Silahkan Tambah Data Dengan Klik Tombol Biru Diatas"}))),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{type:"button",className:"btn btn-light","data-dismiss":"modal"},"Close"))))))}}]),a}(c.Component);G=Object(p.a)({form:"AccordListBarangSet",enableReinitialize:!0})(G);var C=Object(d.b)((function(t){return{BarangSet:t.provinsi.BarangSet,jenis_label:t.provinsi.jenis_label}}))(G),K=a(12),J=a(51),P=Object(c.lazy)((function(){return Promise.resolve().then(a.bind(null,305))})),M=Object(c.lazy)((function(){return a.e(121).then(a.bind(null,1216))})),R=function(t){Object(l.a)(a,t);var e=Object(i.a)(a);function a(t){var o;return Object(n.a)(this,a),(o=e.call(this,t)).inputChange=function(t){return function(e){o.setState(Object(r.a)({},t,e.target.value))}},o.handleBarcode=function(t){for(var e,a,r,n,o,l=JSON.parse(localStorage.getItem("barcode_barangSet_level1")),i=l.map((function(t){return parseFloat(t.netto_disc)})).reduce((function(t,e){return t+e}),0),c=null===(e=l[0])||void 0===e?void 0:e.kode_kelompok,s=null===(a=l[0])||void 0===a?void 0:a.kode_kategori,d=null===(r=l[0])||void 0===r?void 0:r.netto_disc,u=(null===(n=l[1])||void 0===n?void 0:n.kode_kategori)||"",m=(null===(o=l[2])||void 0===o?void 0:o.netto_disc)||"",p="",g="",h=2;h<l.length;h++)p+=(""===p?"":", ")+l[h].kode_kategori,g+=parseFloat(l[h].netto_disc);var b="";b+="I8,A\n",b+="ZN\n",b+="q652\n",b+="O\n",b+="JF\n",b+="\x1bKIZZQ0\n",b+="\x1bKI9+0.0\n",b+="ZT\n",b+="Q160,B25\n",b+="\x1bArg\x1b\x1blabel 200 31\n",b+="\x1b\x1bexit\n",b+="\x1bKI80\n",b+="N\n",b+='B226,106,2,1,1,2,27,N,"'.concat(t,'"\n'),b+='A226,74,2,1,1,1,N,"'.concat(t,'"\n'),b+='B226,56,2,1B,1,2,30,N,"-'.concat(Object(T.D)(i),"-").concat(Object(T.D)(i,3),'"\n'),b+='A226,21,2,1,1,1,N,"-'.concat(Object(T.D)(i),"-").concat(Object(T.D)(i,3),'"\n'),b+="LO408,83,218,3\n",b+="LO409,23,215,3\n",b+='A624,101,2,1,1,1,N,"'.concat(c,'"\n'),b+='A439,101,2,1,1,1,N,""\n',b+='A624,78,2,1,1,1,N,"'.concat(s,'"\n'),b+='A469,78,2,1,1,1,N,"'.concat(Object(T.D)(d,3),'"\n'),(l.length=2)&&(b+='A624,61,2,1,1,1,N,"'.concat(u,'"\n'),b+='A469,61,2,1,1,1,N,"'.concat(""===m?"":Object(T.D)(m,3),'"\n')),(l.length=3)&&(b+='A624,42,2,1,1,1,N,"'.concat(p,'"\n'),b+='A460,42,2,1,1,1,N,"'.concat(""===g?"":Object(T.D)(g,3),'"\n')),b+='A626,18,2,1,1,1,N,"Total"\n',b+='A470,18,2,1,1,1,N,"'.concat(Object(T.D)(i,3),'"\n'),b+="P1\n",document.getElementById("myInput").value=b;var f=document.createElement("a"),v=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});f.href=URL.createObjectURL(v),f.download="autoprint_barcode.txt",document.body.appendChild(f),f.click()},o.inputGrandTotal=function(t){return function(e){var a=o.props.sumGross-parseFloat(o.state.discGlobalGr),n=e.target.value;return a-n<-1?(Object(_.e)("Selisih lebih dari 1"),e.target.value="",!1):a-n<=1?void o.setState(Object(r.a)({},t,e.target.value)):(Object(_.e)("Selisih lebih dari 1"),e.target.value="",!1)}},o.discount=function(t){return function(t){var e=parseFloat(t.target.value)/100*parseFloat(localStorage.getItem("GrandTotalNetto"));o.setState({discGlobalGr:Object(T.D)(e),discGlobalPr:t.target.value,GrandTotalNetto:Object(T.D)(parseFloat(localStorage.getItem("GrandTotalNetto"))-Object(T.D)(e),3)})}},o.state={listLokasi:[],listSales:[],listCustomer:[],kodeCustomer:"",columns:[{dataField:"kode_jenis",text:"Kode Model"},{dataField:"kadar_cetak",text:"Cap\nKode",align:"right",headerAlign:"right"},{dataField:"p",text:"P",align:"right",headerAlign:"right"},{dataField:"k",text:"K",align:"right",headerAlign:"right"},{dataField:"pkg",text:"Bungkus\n(Gr)",align:"right",headerAlign:"right"},{dataField:"bruto",text:"Berat\n(Gr)",align:"right",headerAlign:"right"},{dataField:"harga_jual",text:"Harga Jual",align:"right",headerAlign:"right"},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(t,e,a){return s.a.createElement("div",{className:"text-center"},s.a.createElement("button",{"data-tip":!0,"data-for":"hapus",className:"btn btn-danger",onClick:function(){return o.deleteRow(a,e.netto_disc)}},s.a.createElement(y.a,{id:"hapus",type:"dark",effect:"solid"},s.a.createElement("span",null,"Hapus")),s.a.createElement("i",{className:"fa fa-trash"})),s.a.createElement("br",null))}}],discGlobalGr:0,discGlobalPr:0,totalNWExt:0,noBon:"",namaCustomer:"",lokasi:"",sales:"",namaToko:"",tanggal:"",data:""},o}return Object(o.a)(a,[{key:"deleteRow",value:function(t,e){var a=this;b.a.fire({title:"Anda Yakin ?",text:"Anda Akan Menghapus Data Ini ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(r){if(r.isConfirmed){var n=JSON.parse(localStorage.getItem("barangSet_temp"))||[];n.splice(t,1),localStorage.setItem("barangSet_temp",JSON.stringify(n));var o=localStorage.getItem("GrandTotalNetto"),l=parseFloat(o)-parseFloat(e);localStorage.setItem("GrandTotalNetto",Object(T.D)(parseFloat(l),3)),b.a.fire({text:"Berhasil",timer:2e3,showConfirmButton:!1,position:"top-right",icon:"success"}).then((function(){return a.props.dispatch(Object(N.i)())})).then((function(){return a.props.dispatch(Object(I.g)())})).then((function(){return a.setState({GrandTotalNetto:Object(T.D)(parseFloat(localStorage.getItem("GrandTotalNetto")||0)-0,3)})}))}}))}},{key:"componentDidMount",value:function(){this.props.change("tanggal",Object(D.b)()),this.props.change("total_netto",localStorage.getItem("TotalBruto")),this.props.change("total_bruto",localStorage.getItem("TotalNetto")),this.props.dispatch(Object(g.b)()),this.props.dispatch(Object(I.g)()),this.props.dispatch(Object(I.f)()),this.props.dispatch(Object(J.o)()),localStorage.removeItem("TotalBruto"),localStorage.removeItem("TotalNetto"),localStorage.removeItem("barangSet_temp"),localStorage.removeItem("barcode_barangSet_level1"),localStorage.removeItem("customer_1"),this.setState({GrandTotalNetto:Object(T.D)(parseFloat(localStorage.getItem("GrandTotalNetto")||0)-0,3)})}},{key:"handleSubmit",value:function(t){var e=this,a=t.kodeBarang,r=this.props.kodeBarang.filter((function(t){return t.kode_jenis===a}));Object(F.b)("jenis/get/by-kode-jenis/".concat(t.kodeBarang)).then((function(a){var n=JSON.parse(localStorage.getItem("barcode_barangSet_level1"))||[],o=n.findIndex((function(e){return e.kode_kategori===t.kodeKategori}));if(-1!==o){var l={netto_disc:Object(T.D)(parseFloat(t.nettoDiscGlobalExt||0)+parseFloat(n[o].netto_disc),3),netto:Object(T.D)(parseFloat(t.netto||0)+parseFloat(n[o].netto),3),ongkos_rp:Object(T.D)(parseFloat(void 0===t.rp?0:t.rp)+n[o].ongkos_rp).toLocaleString("id-ID"),disc:Object(T.D)(parseFloat(t.discGlobalGr||0)+parseFloat(n[o].disc)),bruto:Object(T.D)(parseFloat(t.bruto||0)+parseFloat(n[o].bruto)),kode_kategori:t.kodeKategori,kode_tukar:t.kadarTransaksi,kode_kelompok:a.data.kode_kelompok,keterangan:t.keterangan,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===t.harga_jual?0:t.harga_jual};n.push(l),n.splice(o,1),localStorage.setItem("barcode_barangSet_level1",JSON.stringify(n))}else{var i={netto_disc:Object(T.D)(parseFloat(t.nettoDiscGlobalExt||0),3),netto:Object(T.D)(parseFloat(t.netto||0),3),ongkos_rp:parseFloat(void 0===t.rp?0:t.rp),disc:t.discGlobalGr||0,bruto:Object(T.D)(parseFloat(t.bruto||0)),kode_kategori:t.kodeKategori,kode_kelompok:a.data.kode_kelompok,kode_tukar:t.kadarTransaksi,keterangan:t.keterangan,disc_persen:t.discGlobalPr||0,jumlah_barang_set:0,total_berat_barang_set:0,kode_barcode_set:"-",harga_jual:"undefined"===t.harga_jual?0:parseFloat(t.harga_jual)*parseFloat(t.qty)};n.push(i),localStorage.setItem("barcode_barangSet_level1",JSON.stringify(n))}var c={netto_disc:Object(T.D)(parseFloat(t.nettoDiscGlobalExt||0),3)||0,gross:Object(T.D)(parseFloat(t.gross||0))||0,netto:Object(T.D)(parseFloat(t.netto||0),3)||0,qty:t.qty||1,k:parseFloat(t.k||0),ongkos_rp:parseFloat(void 0===t.rp?0:t.rp),kadar_cetak:(r[0].kadar_cetak||0).toString(),disc_persen:t.discGlobalPr||0,kadar_jual:parseFloat(t.kadarTransaksi||0),kadar_level2:a.data.level2||0,kadar_level3:a.data.level3||0,kadar_modal:r[0].kadar_beli||0,kode_jenis:r[0].kode_jenis||0,kode_barcode:"-",p:parseFloat(t.p||0),disc:t.discGlobalGr||0,pkg:parseFloat(t.pkg||0),bruto:Object(T.D)(parseFloat(t.bruto||0)),harga_jual:"undefined"===t.harga_jual?0:t.harga_jual},s=JSON.parse(localStorage.getItem("barangSet_temp"))||[];s.push(c);var d=s.map((function(t){return parseFloat(t.netto_disc)})).reduce((function(t,e){return t+e}),0);localStorage.setItem("TotalNetto",d);var m=s.map((function(t){return parseFloat(t.bruto)})).reduce((function(t,e){return t+e}),0);localStorage.setItem("TotalBruto",m),localStorage.setItem("barangSet_temp",JSON.stringify(s)),b.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}),e.props.dispatch(Object(I.g)()),e.props.dispatch(Object(N.i)()),e.props.dispatch(Object(u.b)("FormBarangSet")),e.props.dispatch(Object(v.q)("barangSet_temp")),e.props.change("total_netto",m),e.props.change("total_bruto",d)})).catch((function(t){return Object(_.c)("Kode Kelompok Belum Disesuaikan, Mohon Sesuaikan Dahulu")}))}},{key:"transaksiPenjualanSubmit",value:function(){var t=this;if(null===localStorage.getItem("barangSet_temp"))return Object(_.e)("Barang masih kosong, Silahkan tambah barang"),!1;var e=Math.random().toString().substr(2,14);this.handleBarcode(e);var a={no_barang_set:this.props.noFaktur,kode_barcode_set:e,total_bruto:localStorage.getItem("TotalBruto"),total_netto:localStorage.getItem("TotalNetto"),detail_barang:JSON.parse(localStorage.getItem("barangSet_temp"))};this.props.dispatch(Object(v.w)());var r=[],n=JSON.parse(localStorage.getItem("barangSet_temp"));n.forEach((function(t,e){var a=[++e,t.kadar_cetak,t.kode_jenis,Object(T.D)(parseFloat(t.bruto)),t.kadar_jual,Object(T.D)(parseFloat(t.disc)),Object(T.D)(parseFloat(t.netto),3),t.pkg,t.qty,Object(T.G)(parseFloat(t.ongkos_rp)),""];r.push(a)}));var o=["","","",Object(T.D)(n.map((function(t){return parseFloat(t.bruto)})).reduce((function(t,e){return t+e}),0)),"",Object(T.D)(n.map((function(t){return parseFloat(t.disc)})).reduce((function(t,e){return t+e}),0)),Object(T.D)(n.map((function(t){return parseFloat(t.netto)})).reduce((function(t,e){return t+e}),0),3),n.map((function(t){return parseFloat(t.pkg)})).reduce((function(t,e){return t+e}),0),n.map((function(t){return parseFloat(t.qty)})).reduce((function(t,e){return t+e}),0),Object(T.G)(n.map((function(t){return parseFloat(t.ongkos_rp)})).reduce((function(t,e){return t+e}),0)),this.state.totalNWExt];r.push(o);var l=[["No","Kadar","Kode","Bruto \n(Gr)","Kode\nTukar","Diskon","Netto \n(Gr)","Pkg","Qty","Ongkos \n(Rp)","Grand Total\nNetto Ext"]];Object(F.f)("barang-set/add",a).then((function(){return b.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}).then((function(){return Object(k.a)("No Trx",t.props.noFaktur.toUpperCase(),"","","Kode Barcode",e,"","","ADMIN",t.state.tanggal,"",l,"Barang Set",r)})).then((function(){return t.props.dispatch(Object(v.m)())})).then((function(){return localStorage.removeItem("barangSet_temp")})).then((function(){return localStorage.removeItem("TotalNetto")})).then((function(){return localStorage.removeItem("TotalBruto")})).then((function(){return localStorage.removeItem("GrandTotalNetto")})).then((function(){return localStorage.removeItem("noFaktur")})).then((function(){return t.props.dispatch(Object(g.b)())})).then((function(){return t.props.dispatch(Object(f.k)())})).then((function(){return t.setState({noBon:"",namaCustomer:"",lokasi:"",sales:"",namaToko:"",tanggal:"",toko:"",GrandTotalNetto:0})}))})).catch((function(e){return b.a.fire({position:"top-end",icon:"error",text:"".concat(e.response&&e.response.data),showConfirmButton:!1,timer:1500}).then((function(){return t.props.dispatch(Object(v.m)())}))}))}},{key:"onSubmit",value:function(t,e){this.setState(Object(r.a)({},e,t))}},{key:"onSubmitToko",value:function(t,e){var a=t.split("|");this.setState({kodeCustomer:a[0],namaCustomer:a[1],namaToko:a[2],toko:t})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("ol",{className:"breadcrumb mb-2"},s.a.createElement(K.b,{to:"/KlasifikasiBarang"},s.a.createElement("button",{type:"button",className:"btn btn-secondary ","data-tut":"reactour_5"},s.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," Back"))),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"d-none"},s.a.createElement("textarea",{id:"myInput"})),s.a.createElement("div",{className:"card"},s.a.createElement(E.a,{title:"Barang Set"}),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-12 col-md-12 mt-3"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-12"},s.a.createElement(C,null)),s.a.createElement("div",{className:"col-lg-4"},s.a.createElement(m.a,{name:"tanggal",component:B.b,type:"date",label:"Tanggal",placeholder:"Masukan Tanggal"})),s.a.createElement("div",{className:"col-lg-4 d-none"},s.a.createElement(m.a,{name:"level_customer_1",component:B.c,options:this.props.listCustomer.filter((function(t){return"LEVEL1"===t.level_customer})).map((function(t){return{value:t.kode_customer,name:t.nama_toko+" - "+t.nama_customer}})),type:"text",label:"Level Customer 1",placeholder:"Level Customer 1",onChange:function(t){return localStorage.setItem("customer_1",t)}})),s.a.createElement("div",{className:"col-lg-4"}),s.a.createElement("div",{className:"col-lg-6"},s.a.createElement(m.a,{name:"total_netto",component:B.b,type:"text",label:"Total Netto",placeholder:"Masukan Total Netto",readOnly:!0})),s.a.createElement("div",{className:"col-lg-6"},s.a.createElement(m.a,{name:"total_bruto",component:B.b,type:"text",label:"Total Bruto",placeholder:"Masukan Total Bruto",readOnly:!0})),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"text-right"},s.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t.props.dispatch(Object(S.j)())}},"Tambah Barang",s.a.createElement("i",{className:"fa fa-plus ml-3","aria-hidden":"true"})))))),s.a.createElement("div",{className:"col-lg-12 mt-5"},s.a.createElement(x.a,{keyField:"id",data:this.props.listBarangSet,columns:this.state.columns}),s.a.createElement("div",{className:"text-right"},s.a.createElement("button",{className:"btn btn-primary",disabled:this.props.onSend,onClick:function(){return t.transaksiPenjualanSubmit()}},this.props.onSend?s.a.createElement("span",{className:"spinner-border spinner-border-sm mr-3","aria-hidden":"true"}):null,"Selesai",s.a.createElement("i",{className:"fa fa-paper-plane ml-3","aria-hidden":"true"})))))))),s.a.createElement(P,{content:s.a.createElement(c.Suspense,{fallback:s.a.createElement(O.a,{width:"100%",height:50,count:4})},s.a.createElement(M,{onSubmit:function(e){return t.handleSubmit(e)}})),title:"Tambah Data"}))}}]),a}(c.Component);R=Object(p.a)({form:"BarangSet",enableReinitialize:!0})(R);e.default=Object(d.b)((function(t){return{noFaktur:t.provinsi.noFaktur,listCustomer:t.customerState.listCustomer||[],barangSet_temp:t.provinsi.barangSet_temp,listLokasi:t.lokasiState.listLokasi||[],listSales:t.salesmanState.listSalesman||[],totalNW:t.provinsi.totalNW,username:t.provinsi.username,onSend:t.provinsi.onSend,kodeBarang:t.kodeBarangState.listKodeBarang||[],listBarangSet:t.provinsi.listBarangSet}}),null)(R)}}]);