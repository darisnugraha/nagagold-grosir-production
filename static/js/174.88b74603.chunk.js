(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[174],{1205:function(t,a,e){"use strict";e.r(a);var n=e(182),o=e(52),r=e(53),i=e(54),l=e(55),s=e(0),c=e.n(s),p=e(33),u=e(12),g=e(88),h=e(15),m=e.n(h),d=e(39),k=e(57),b=e(20),y=e(96),f=e.n(y),R=e(3),T=e(302),S=e(5),v=e(1),_=e(23),B=Object(s.lazy)((function(){return Promise.all([e.e(5),e.e(14)]).then(e.bind(null,1036))})),O=function(t){Object(i.a)(e,t);var a=Object(l.a)(e);function e(t){var r;Object(o.a)(this,e),(r=a.call(this,t)).inputChange=function(t){return function(a){r.setState(Object(n.a)({},t,a.target.value))}};var i=new Date,l="".concat(i.getFullYear(),"-").concat(i.getMonth()+1,"-").concat(i.getDate());return r.state={listSupplier:[],tanggal:l,bonBayar:"",detail:"",tipeTransaksi:"BARANG",ready:!1,noBon:Object(v.L)()+"/TTP-"+Object(v.J)()},r}return Object(r.a)(e,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(g.j)()),this.props.dispatch(Object(g.n)()),this.props.dispatch(Object(d.b)()),Object(v.nb)(["PrintPembayaranSupplier","notaPembayaranSupplier","totalTunaiRp","alatBayarTunai","totalTrfRp","totalTitipRp","alatBayarTrf","ciokTemp","alatBayarCiok","totalCiok","totalBrutoCiok","rongsokTemp","alatBayarRosok","totalRongsok","totalBrutoRongsok","listHutang","discount","bonus","denda","cashTempRp","alatBayarTunaiRp","transferTempRp","alatBayarTrfRp","alatBayarTitipRp","noFaktur"])}},{key:"componentWillUnmount",value:function(){Object(v.nb)(["PrintPembayaranSupplier","notaPembayaranSupplier","totalTunaiRp","alatBayarTunai","totalTrfRp","totalTitipRp","alatBayarTrf","ciokTemp","alatBayarCiok","totalCiok","totalBrutoCiok","rongsokTemp","alatBayarRosok","totalRongsok","totalBrutoRongsok","listHutang","discount","bonus","denda","cashTempRp","alatBayarTunaiRp","transferTempRp","alatBayarTrfRp","alatBayarTitipRp","noFaktur"]),this.setState({ready:!0})}},{key:"handleSubmit",value:function(t){var a,e,n,o,r,i,l,s,c,p,u,g,h=this,y=Object(v.tb)(t);if(console.log(y),void 0===y.supplier)return Object(b.e)("Mohon isi Supplier"),!1;if(null===localStorage.getItem("alatBayarCiok")&&null===localStorage.getItem("alatBayarRosok")&&null===localStorage.getItem("alatBayarTrf")&&null===localStorage.getItem("alatBayarTunai")&&null===localStorage.getItem("alatBayarTunaiRp")&&null===localStorage.getItem("alatBayarTrfRp")&&null===localStorage.getItem("alatBayarTitip")&&null===localStorage.getItem("alatBayarTitipRp"))return Object(b.e)("Mohon Masukan Alat Pembayaran Paling Tidak 1 Jenis"),!1;var f={kode_jenis:"-",bruto:0,kadar_transaksi:0,netto:0},T={cash_rp:0,harga_emas:0,cash_netto:0},B={transfer_rp:0,harga_emas:0,transfer_netto:0,tanggal_transfer:"2021-01-01",acc_from:"-",acc_to:"-"},O=JSON.parse(localStorage.getItem("alatBayarCiok"))||[f],j=JSON.parse(localStorage.getItem("alatBayarRosok"))||[f],N=JSON.parse(localStorage.getItem("alatBayarTrf"))||[B],I=JSON.parse(localStorage.getItem("alatBayarTitipRp"))||[{titip_rp:0,harga_emas:0,titip_netto:0}],P=JSON.parse(localStorage.getItem("alatBayarTrfRp"))||[B],C=JSON.parse(localStorage.getItem("alatBayarTunai"))||[T],E=JSON.parse(localStorage.getItem("alatBayarTunaiRp"))||[T],A=(y.supplier?y.supplier:"DEFAULT | DEFUALT").split("|"),H=this.props.supplier.find((function(t){return t.kode_supplier===A[0]})),G={kode_supplier:A[0],no_bon:this.state.noBon,no_bayar:this.props.noFaktur,tanggal:Object(v.A)(this.props.date),type_bon:"RUPIAH"===this.state.tipeTransaksi?"BON RP":"BON GR",jumlah_hutang:"RUPIAH"===this.state.tipeTransaksi?y.totalHutangRP:y.totalHutangGr.replace(",",""),total_putus_titip:"RUPIAH"===this.state.tipeTransaksi?I.map((function(t){return t.titip_netto})).reduce((function(t,a){return t+a}),0):localStorage.getItem("totalTitipRp")||0,total_denda:Number(y.denda)||0,total_hutang:"RUPIAH"===this.state.tipeTransaksi?y.totalHutangRP:y.totalHutangGr.replace(",",""),detail_ciok:O,bayar_ciok:Object(v.b)(localStorage.getItem("totalCiok")||0)||0,detail_rongsok:j,bayar_rongsok:Object(v.b)(localStorage.getItem("totalRongsok")||0)||0,detail_cash:"RUPIAH"===this.state.tipeTransaksi?E:C,bayar_cash:"RUPIAH"===this.state.tipeTransaksi?E.map((function(t){return t.cash_netto})).reduce((function(t,a){return t+a}),0):localStorage.getItem("totalTunaiRp")||0,detail_titip:I,bayar_titip:"RUPIAH"===this.state.tipeTransaksi?I.map((function(t){return t.titip_netto})).reduce((function(t,a){return t+a}),0):localStorage.getItem("totalTitipRp")||0,detail_trf:"RUPIAH"===this.state.tipeTransaksi?P:N,bayar_trf:"RUPIAH"===this.state.tipeTransaksi?P.map((function(t){return t.transfer_netto})).reduce((function(t,a){return t+a}),0):localStorage.getItem("totalTrfRp")||0,detail_giro:[{giro_rp:0,harga_emas:0,giro_netto:0,tanggal_giro:"-",no_giro:"-",bank_giro:"-",acc_to:"-",bank_to:"-"}],bayar_giro:0};localStorage.setItem("notaPembayaranSupplier",JSON.stringify(G)),this.props.dispatch(Object(R.w)());var D=[["Tunai","-",{content:Object(v.G)(0!==(null===(a=C[0])||void 0===a?void 0:a.cash_rp)?null===(e=C[0])||void 0===e?void 0:e.cash_rp:null===(n=E[0])||void 0===n?void 0:n.cash_rp)||0,styles:{halign:"right"}},{content:Object(v.G)(0!==(null===(o=C[0])||void 0===o?void 0:o.harga_emas)?null===(r=C[0])||void 0===r?void 0:r.harga_emas:null===(i=E[0])||void 0===i?void 0:i.harga_emas)||0,styles:{halign:"right"}},"","","",{content:Object(v.G)(0!==(null===(l=C[0])||void 0===l?void 0:l.cash_netto)?null===(s=C[0])||void 0===s?void 0:s.cash_netto:null===(c=E[0])||void 0===c?void 0:c.cash_netto)||0,styles:{halign:"right"}}],["Transfer","-",{content:Object(v.G)(0!==(null===(p=N[0])||void 0===p?void 0:p.transfer_rp)?N[0].transfer_rp:P[0].transfer_rp)||0,styles:{halign:"right"}},{content:Object(v.G)(0!==(null===(u=N[0])||void 0===u?void 0:u.harga_emas)?N[0].harga_emas:P[0].harga_emas)||0,styles:{halign:"right"}},"","","",{content:Object(v.G)(0!==(null===(g=N[0])||void 0===g?void 0:g.transfer_netto)?N[0].transfer_netto:P[0].transfer_netto)||0,styles:{halign:"right"}}],["Titip","-",{content:0,styles:{halign:"right"}},{content:Object(v.G)(I[0].harga_emas)||0,styles:{halign:"right"}},"","","",{content:Object(v.G)(I[0].titip_netto)||0,styles:{halign:"right"}}]];(JSON.parse(localStorage.getItem("ciokTemp"))||[]).forEach((function(t,a){var e=["CT",t.kode_jenis,{content:Object(v.D)(t.bruto),styles:{halign:"right"}},"",{content:t.kadar_transaksi,styles:{halign:"right"}},"","",{content:Object(v.D)(t.netto,3),styles:{halign:"right"}}];D.push(e)})),(JSON.parse(localStorage.getItem("rongsokTemp"))||[]).forEach((function(t,a){var e=["Rongsok",t.kode_jenis,{content:Object(v.D)(t.bruto),styles:{halign:"right"}},"",{content:t.kadar_transaksi,styles:{halign:"right"}},"","",{content:Object(v.D)(t.netto,3),styles:{halign:"right"}}];D.push(e)}));var J=["DENDA","DENDA",{content:Object(v.D)(null!==localStorage.getItem("denda")?localStorage.getItem("denda"):0),styles:{halign:"right"}},"","","","",{content:Object(v.D)(null!==localStorage.getItem("denda")?localStorage.getItem("denda"):0),styles:{halign:"right"}}];Object(v.db)()||D.push(J);var U=[[{content:"Saldo Awal",styles:{halign:"right"},colSpan:7},Object(v.F)("RUPIAH"===this.state.tipeTransaksi?y.totalHutangRP:y.totalHutangGr.replace(",",""))],[{content:"Total Pembayaran",styles:{halign:"right"},colSpan:7},Object(v.F)("RUPIAH"===this.state.tipeTransaksi?y.totalBayarCash:y.totalBayar.replace(",",""))],[{content:"Saldo Akhir",styles:{halign:"right"},colSpan:7},Object(v.F)("RUPIAH"===this.state.tipeTransaksi?parseFloat(y.totalHutangRP)-parseFloat(y.totalBayarCash):parseFloat(y.totalHutangGr.replace(",",""))-parseFloat(y.totalBayar.replace(",","")))]];D.push.apply(D,U),console.log(JSON.stringify(D));var F=[[{content:"Nama Supplier : ".concat(H.nama_supplier),colSpan:8}],["Jenis \nPembayaran","Nama \nBarang",{content:"Gross \nBayar",styles:{halign:"right"}},{content:"Harga",styles:{halign:"right"}},{content:"Kadar",styles:{halign:"right"}},{content:"Pkg",styles:{halign:"right"}},{content:"Gw+Pkg",styles:{halign:"right"}},{content:"Netto",styles:{halign:"right"}}]];console.log(JSON.stringify(G)),Object(S.f)("trx-supplier/bayar-hutang?kode_toko="+Object(v.L)(),G).then((function(t){return m.a.fire({position:"top-end",icon:"success",text:"Data Berhasil Ditambahkan!",showConfirmButton:!1,timer:1500}).then((function(){return h.props.dispatch(Object(R.m)())})).then((function(){return Object(v.nb)(["PrintPembayaranSupplier","totalTunaiRp","alatBayarTunai","alatBayarTitipRp","alatBayarTitip","totalTrfRp","alatBayarTrf","ciokTemp","alatBayarCiok","totalCiok","totalBrutoCiok","rongsokTemp","alatBayarRosok","totalRongsok","totalBrutoRongsok","listHutang","discount","bonus","denda","cashTempRp","alatBayarTunaiRp","transferTempRp","alatBayarTrfRp","noFaktur"])})).then((function(){return localStorage.setItem("isLogin",!0)})).then((function(){return h.props.dispatch(Object(d.b)())})).then((function(){return h.props.history.push("KlasifikasiSupplier")})).then((function(){return Object(k.a)("Tanggal",h.props.date,"","","No Nota",t.data.no_bon,"","",Object(v.P)(),Object(_.b)(),"",F,"NOTA PEMBAYARAN SUPPLIER",D)})).then((function(){return window.location.reload()}))})).catch((function(t){var a;return m.a.fire({position:"top-end",icon:"error",text:(null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.data)||"Terjadi Kesalahan Internal, Silahkan Hubungi Admin",showConfirmButton:!1,timer:1500}).then((function(){return h.props.dispatch(Object(R.m)())}))}))}},{key:"render",value:function(){var t=this;return c.a.createElement("div",{className:"container-fluid",style:{color:"black"}},c.a.createElement("ol",{className:"breadcrumb mb-2"},c.a.createElement(u.b,{to:"/KlasifikasiSupplier"},c.a.createElement("button",{type:"button",className:"btn btn-secondary"},c.a.createElement("i",{className:"fa fa-angle-left mr-3","aria-hidden":"true"})," Back"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"card"},c.a.createElement(T.a,{title:"Pembayaran Hutang Supplier"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("ul",{className:"nav nav-pills bg-nav-pills nav-justified mb-3"},c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{href:"#rupiah","data-toggle":"tab","aria-expanded":"false",className:"nav-link rounded-0 active",onClick:function(){return t.setState({tipeTransaksi:"BARANG"})}},c.a.createElement("i",{className:"mdi mdi-home-variant d-lg-none d-block mr-1"}),c.a.createElement("span",{className:"d-none d-lg-block"},"Gram"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{href:"#gram","data-toggle":"tab","aria-expanded":"true",className:"nav-link rounded-0 ",onClick:function(){return t.setState({tipeTransaksi:"RUPIAH"})}},c.a.createElement("i",{className:"mdi mdi-account-circle d-lg-none d-block mr-1"}),c.a.createElement("span",{className:"d-none d-lg-block"},"Rupiah")))),c.a.createElement("div",{className:"tab-content"},c.a.createElement("div",{className:"tab-pane show active",id:"rupiah"},c.a.createElement(s.Suspense,{fallback:c.a.createElement(f.a,{width:"100%",height:200})},c.a.createElement(B,{tampungCiok:this.props.tampungCiok,tampungRongsok:this.props.tampungRongsok,totalCiok:this.props.totalCiok,totalRongsok:this.props.totalRongsok,totalBrutoCiok:this.props.totalBrutoCiok,totalBrutoRongsok:this.props.totalBrutoRongsok,onSubmit:function(a){return t.handleSubmit(a)},jenisTransaksi:this.state.tipeTransaksi,onSend:this.props.onSend}))),c.a.createElement("div",{className:"tab-pane",id:"gram"},c.a.createElement(s.Suspense,{fallback:c.a.createElement(f.a,{width:"100%",height:200})},c.a.createElement(B,{tampungCiok:this.props.tampungCiok,tampungRongsok:this.props.tampungRongsok,totalCiok:this.props.totalCiok,totalRongsok:this.props.totalRongsok,totalBrutoCiok:this.props.totalBrutoCiok,totalBrutoRongsok:this.props.totalBrutoRongsok,onSubmit:function(a){return t.handleSubmit(a)},jenisTransaksi:this.state.tipeTransaksi,onSend:this.props.onSend})))))))))))}}]),e}(s.Component);a.default=Object(p.b)((function(t){return{date:t.date.data,pembayaranSupplierList:t.provinsi.pembayaranSupplier,supplier:t.supplierState.listSupplier||[],tampungCiok:t.provinsi.tampungCiok,tampungRongsok:t.provinsi.tampungRongsok,totalCiok:t.provinsi.totalCiok,totalRongsok:t.provinsi.totalRongsok,totalBrutoCiok:t.provinsi.totalBrutoCiok,totalBrutoRongsok:t.provinsi.totalBrutoRongsok,alert:t.provinsi.alert,error:t.provinsi.error,noFaktur:t.provinsi.noFaktur,username:t.provinsi.username,onSend:t.provinsi.onSend}}),null)(O)}}]);