(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[206],{1176:function(e,t,a){"use strict";a.r(t);var n=a(52),r=a(53),i=a(54),l=a(55),c=a(0),s=a.n(c),o=a(441),d=a(33),m=a(306),u=a.n(m),p=a(20),f=a(316),h=a.n(f),v=a(302),b=a(5),k=a(303),g=a(111),E=a(15),_=a.n(E),N=a(308),O=a(1),j=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).nextStep=function(){var e=r.state.step;0===e&&r.setState({step:e+1,step2:"row",step1:"row d-none"}),r.props.dispatch(Object(g.k)())},r.prevStep=function(){var e=r.state.step;1===e&&r.setState({step:e-1,step2:"row d-none",step1:"row"})},r.state={columns:[{dataField:"tanggal",text:"Tanggal",formatter:function(e){return Object(O.C)(e)}},{dataField:"no_preorder",text:"Nomor PO"},{dataField:"kode_lokasi",text:"Lokasi"},{dataField:"kode_sales",text:"Sales"},{dataField:"total_netto",text:"Netto (Gr)",align:"right",headerAlign:"right",formatter:function(e){return Object(O.F)(e)}},{dataField:"disc_persen",text:"Disc (%)",align:"right",headerAlign:"right"},{dataField:"total_netto_disc_ext",text:"Netto - Disc Ext",align:"right",headerAlign:"right",formatter:function(e){return Object(O.F)(e)}},{dataField:"Aksi",text:"Aksi",csvExport:!1,formatter:function(e,t){return s.a.createElement("div",{className:"mx-auto"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6"},s.a.createElement("button",{"data-tip":!0,"data-for":"validasi",className:"btn btn-success mr-2","data-tut":"reactour_4",onClick:function(){return r.kirimvalidasi(t)}},s.a.createElement("i",{className:"fa fa-check "}),s.a.createElement(N.a,{id:"validasi",type:"dark",effect:"solid"},s.a.createElement("span",null,"Validasi")))),s.a.createElement("div",{className:"col-lg-6"},s.a.createElement("button",{"data-tip":!0,"data-for":"cancel",className:"btn btn-danger mr-2","data-tut":"reactour_4",onClick:function(){return r.cancelValidasi(t.no_preorder)}},s.a.createElement("i",{className:"fa fa-times "}),s.a.createElement(N.a,{id:"cancel",type:"dark",effect:"solid"},s.a.createElement("span",null,"Cancel"))))))}}],step:0,step1:"row",step2:"row d-none",step3:"row d-none",angka:0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){localStorage.setItem("FakturTerpilih","[]"),localStorage.setItem("FakturTerpilih_kirim","[]"),this.props.dispatch(Object(g.j)())}},{key:"cancelValidasi",value:function(e){var t=this;_.a.fire({title:"Anda Yakin ?",text:"Anda Akan Cancel Data PO Ini ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(a){a.isConfirmed&&Object(b.h)("pre-order/cancel/"+e).then((function(){return Object(p.b)("Berhasil Cancel Validasi")})).then((function(){return t.prevStep()})).then((function(){return t.props.dispatch(Object(g.j)())})).then((function(){return localStorage.removeItem("FakturTerpilih")})).then((function(){return localStorage.removeItem("FakturTerpilih_kirim")})).catch((function(){return Object(p.c)("Gagal Validasi, Check Koneksi Anda")}))}))}},{key:"kirimvalidasi",value:function(e){var t=this;e.detail_barang.map((function(e){return delete e._id,delete e.kode_kategori,delete e.nama_jenis,!0})),delete e.status_valid,delete e.validate_by,delete e.validate_date,delete e.input_by,delete e.input_date,delete e.__v,Object(b.f)("validate-pre-order/simpan",e).then((function(){return Object(p.b)("Berhasil Validasi")})).then((function(){return t.prevStep()})).then((function(){return t.props.dispatch(Object(g.j)())})).then((function(){return localStorage.removeItem("FakturTerpilih")})).then((function(){return localStorage.removeItem("FakturTerpilih_kirim")})).catch((function(){return Object(p.c)("Gagal Validasi, Check Koneksi Anda")}))}},{key:"batalalidasi",value:function(e){var t=this;e.detail_barang.map((function(e){return delete e._id,delete e.kode_kategori,delete e.nama_jenis,!0})),delete e.status_valid,delete e.validate_by,delete e.validate_date,delete e.input_by,delete e.input_date,delete e.__v,Object(b.f)("validate-pre-order/batal",e).then((function(){return Object(p.b)("Berhasil Batal Validasi")})).then((function(){return t.prevStep()})).then((function(){return t.props.dispatch(Object(g.j)())})).then((function(){return localStorage.removeItem("FakturTerpilih")})).then((function(){return localStorage.removeItem("FakturTerpilih_kirim")})).catch((function(){return Object(p.c)("Gagal Batal Validasi, Check Koneksi Anda")}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"card"},s.a.createElement(v.a,{title:"Validasi Pre Order"}),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:this.state.step1},s.a.createElement("div",{className:"col-lg-12 mt-3"},s.a.createElement(k.a,{keyField:"no_preorder",data:this.props.validasiPO,columns:this.state.columns,search:!0,striped:!0,hover:!0,condensed:!0,bordered:!0,headerClasses:"header-table",pagination:u()()})),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"text-right"},s.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.nextStep()}},"Next",s.a.createElement("i",{className:"fa fa-chevron-right ml-3"}))))),s.a.createElement("div",{className:this.state.step2},s.a.createElement("div",{className:"col-lg-12 mt-3"},s.a.createElement(k.a,{keyField:h()(),data:this.props.validasiPOSelected,columns:this.state.columns})),s.a.createElement("div",{className:"col-lg-12"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:" col-lg-6 text-left"},s.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.prevStep()}},s.a.createElement("i",{className:"fa fa-chevron-left mr-3"}),"BACK")),s.a.createElement("div",{className:"ml-auto mr-3"},s.a.createElement("div",{className:"row"},s.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.batalalidasi(e.state.tipeTransaksi)}},s.a.createElement("i",{className:"fa fa-times mr-3"}),"BATAL VALIDASI"),s.a.createElement("button",{className:"btn btn-primary ml-2",onClick:function(){return e.kirimvalidasi(e.state.tipeTransaksi)}},s.a.createElement("i",{className:"fa fa-check mr-3"}),"VALIDASI"))))))))))))}}]),a}(c.Component);j=Object(o.a)({form:"validasiPO",enableReinitialize:!0})(j),t.default=Object(d.b)((function(e){return{validasiPO:e.provinsi.validasiPO,validasiPOSelected:e.provinsi.validasiPOSelected}}),null)(j)}}]);