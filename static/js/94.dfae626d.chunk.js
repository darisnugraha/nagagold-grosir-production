(this.webpackJsonpmonica=this.webpackJsonpmonica||[]).push([[94],{1217:function(e,t,a){"use strict";a.r(t);var n=a(52),o=a(53),r=a(54),l=a(55),s=a(0),i=a.n(s),c=a(33),u=a(440),p=a(441),d=a(460),m=a(76),b=a(1),F=a(48),g=a(795),v=a(793),f=a(183),h=a(184),x=a(9),N=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={listPerhiasan:[],listRongsok:[],listCiok:[],listBarangPerhiasan:[]},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(b.qb)(),Object(v.c)(this.props.change),Object(x.b)("kodeKelompok").then((function(t){e.props.dispatch(Object(m.k)(t))}))}},{key:"componentWillUnmount",value:function(){Object(v.a)()}},{key:"handleChange",value:function(e){var t=e,a=this.props.kode_barang.find((function(e){return e.kode_jenis===t}));this.props.change("kadarTransaksi",a.kadar_beli),this.props.change("keterangan",a.kadar_jual),Object(b.zb)("Kode Barcode")}},{key:"setNetto",value:function(){this.props.change("netto","NaN"===this.props.netto?0:this.props.netto)}},{key:"handleBarcode",value:function(e){var t=this,a=e.target.value;clearTimeout(this.delay),this.delay=setTimeout((function(){var e=Object(g.a)(a);e&&(t.props.change("gross",e.GW),t.props.change("pkg",e.PKG))}),400)}},{key:"render",value:function(){var e=this;return i.a.createElement(f.a,{onSubmit:this.props.handleSubmit},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-3"},i.a.createElement(u.a,{name:"kodeBarang",label:"Kode Model",className:"form-control",component:F.c,options:this.props.kode_barang.map((function(e){return{value:e.kode_jenis,name:e.nama_jenis}})),onChange:function(t){return e.handleChange(t.value)}})),i.a.createElement("div",{className:"col-lg-3"},i.a.createElement(u.a,{name:"barcode",label:"Kode Barcode",type:"text",component:F.b,onChange:function(t){return e.handleBarcode(t)}})),i.a.createElement("div",{className:"col-lg-3"},i.a.createElement(u.a,{name:"keterangan",label:"Kadar Jual (%)",type:"number",component:F.b,readOnly:!0,onChange:this.setNetto()})),i.a.createElement("div",{className:"col-lg-3"},i.a.createElement(u.a,{name:"kadarTransaksi",label:"Kadar Beli(%)",type:"number",component:F.b,readOnly:!0,onChange:this.setNetto()})),i.a.createElement("div",{className:"col-lg-2"},i.a.createElement(u.a,{name:"berat_baki",label:"Berat Baki",type:"text",component:F.b,onChange:this.setNetto(),normalize:b.g,readOnly:!0})),i.a.createElement("div",{className:"col-lg-2"},i.a.createElement(u.a,{name:"gross",label:"Gross(Gr)",type:"text",component:F.b,onChange:this.setNetto(),normalize:b.g})),i.a.createElement("div",{className:"col-lg-2"},i.a.createElement(u.a,{name:"pkg",label:"Package(Gr)",type:"text",component:F.b,onChange:this.setNetto(),normalize:b.g})),i.a.createElement("div",{className:"col-lg-3"},i.a.createElement(u.a,{name:"qty",label:"Qty",type:"text",component:F.b,onChange:this.setNetto(),normalize:b.e})),i.a.createElement("div",{className:"col-lg-3"},i.a.createElement(u.a,{name:"netto",label:"Netto",type:"text",component:F.b,readOnly:!0,normalize:b.c})),i.a.createElement("div",{className:"col-lg-3 d-none"},i.a.createElement(u.a,{name:"noFaktur",label:"Netto",type:"text",component:F.b,readOnly:!0,onLoad:function(){return e.props.change("noFaktur",e.props.noFaktur)}})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(h.a,null)))))}}]),a}(s.Component);N=Object(p.a)({form:"FormModalTimbangan",enableReinitialize:!0})(N);var k=Object(d.a)("FormModalTimbangan");t.default=Object(c.b)((function(e){var t,a=k(e,"gross","kadarTransaksi","pkg"),n=a.gross,o=a.kadarTransaksi,r=a.pkg;return{netto:((parseFloat(n||0)-parseFloat(r||0))*(parseFloat(o)/100)).toFixed(3),kode_barang:e.kodeBarangState.listKodeBarang||[],onSend:e.provinsi.onSend,berat_baki:e.bakiState.beratBaki,kode_kelompok:null===(t=e.provinsi.status_totalan)||void 0===t?void 0:t.kode_kelompok,initialValues:{qty:1}}}))(N)},793:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return c}));var n=a(187),o=a(802),r=localStorage.getItem("namaTimbangan"),l=localStorage.getItem("enableTimbangan"),s=function(e){l&&n.a.database().ref(r).on("value",(function(t){var a=t.val();e("bruto",a.nilai)}))},i=function(e){var t=Object(o.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));t.on("connect",(function(){console.log("SOCKET CONNECTED : ",t.connected)}));var a=localStorage.getItem("username");t.on("timbangan-emit",(function(t){var n;(null===(n=t.user_id)||void 0===n?void 0:n.toLowerCase())===(null===a||void 0===a?void 0:a.toLowerCase())&&(localStorage.setItem("timbangan-active","true"),e(document.activeElement.name,t.value))}))},c=function(){var e=Object(o.a)("http://103.119.55.52:8010/api/v1/".replace(/\/api\/v1\//,""));localStorage.setItem("timbangan-active","false"),e.disconnect()}},795:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=function(e){if(!(e.indexOf(" ")>0||e.indexOf("-")>0||e.indexOf("//")>0||e.indexOf("/")>0))return!1;var t=0,a=0;return e.indexOf("-")>0?(t=parseFloat(e.split("-")[0]).toFixed(3),{NW:a=parseFloat(e.split("-")[1]).toFixed(3),GW:t,PKG:(parseFloat(t)-parseFloat(a)).toFixed(3)}):e.indexOf("//")>0&&void function(e){var t=0,a=0,n=0;if(e.indexOf("//")>0){o(e.split("//"))}else{if(!(e.indexOf("/")>0)){var r=e.split(" ");return t=parseFloat(r[0]).toFixed(3),a=parseFloat(r[1]).toFixed(3),n=(parseFloat(t)-parseFloat(a)).toFixed(3),{GW:t,NW:a,PKG:n}}o(e.split("/"))}}(e)};function o(e){var t,a;return t=parseFloat(e[0].trim()).toFixed(3),{NW:a=parseFloat(e[1].trim()).toFixed(3),GW:t,PKG:(parseFloat(t)-parseFloat(a)).toFixed(3)}}var r=function(e){var t=function(e){if("4"===e.charAt(0)||"5"===e.charAt(0)&&"0000"===e.slice(-4)){var t=e.charAt(0),a=e.substr(1,t)/1e3,n=e.substr(Number(t)+1,1),o=e.substr(Number(t)+2,n)/1e3,r=parseFloat(a)-parseFloat(o);return{NW:parseFloat(o).toFixed(3),PKG:parseFloat(r).toFixed(3),GW:parseFloat(a).toFixed(3)}}if(22===e.length&&"0"===e.substr(0,1)){var l=parseFloat(e.substr(13,5))/100,s=parseFloat(e.substr(18,4))/100,i=l+s;return{NW:parseFloat(l).toFixed(3),PKG:parseFloat(s).toFixed(3),GW:parseFloat(i).toFixed(3)}}if(20===e.length){var c=e.substr(8,6)/100,u=e.substr(14,6)/100,p=u-c;return{NW:parseFloat(c).toFixed(3),PKG:parseFloat(p).toFixed(3),GW:parseFloat(u).toFixed(3)}}if(14===e.length){var d=e.substr(1,4)/1e3,m=e.substr(6,4)/1e3,b=d-m;return{NW:parseFloat(m).toFixed(3),PKG:parseFloat(b).toFixed(3),GW:parseFloat(d).toFixed(3)}}}(e),a=function(e){var t=e.indexOf("X");if(12===e.length-1-t&&"0"!==e.substr(1,1)){console.log(e.substr(t+7,5));var a=parseFloat(e.substr(t+1,7))/100,n=parseFloat(e.substr(t+8,5))/100;return{NW:a-n,PKG:n,GW:a}}return!1}(e),o=function(e){if("#"===e.substr(5,1)){var t,a,n;return n=(a=parseFloat(e.split("#")[0]).toFixed(3)/100)-(t=parseFloat(e.split("#")[1]).toFixed(3)/100),console.log(e),{NW:t,GW:a,PKG:n}}return!1}(e),r=function(e){if("LLP"===e.substr(0,3)){console.log("INI DI LLP");var t=e.split("-"),a=t[1].substr(0,t[1].length-1),n=t[2].substr(0,t[2].length-1);return{NW:n,PKG:parseFloat(a)-parseFloat(n),GW:a}}return!1}(e),l=function(e){if(15===e.length||14===e.length||16===e.length){var t=e.charAt(0),a=e.charAt(Number(t)+1),n=e.substr(1,t)/1e3,o=e.substr(Number(t)+2,a)/1e3,r=n-o;return{NW:parseFloat(o).toFixed(3),PKG:parseFloat(r).toFixed(3),GW:parseFloat(n).toFixed(3)}}return!1}(e),s=function(e){if(-1!==e.indexOf("//")){var t=e.split("//")[0],a=e.split("//")[1],n=Number(t)-Number(a);return console.log(parseFloat(a).toFixed(3),parseFloat(n).toFixed(3),parseFloat(t).toFixed(3)),{NW:parseFloat(a).toFixed(3),PKG:parseFloat(n).toFixed(3),GW:parseFloat(t).toFixed(3)}}if(-1!==e.indexOf("-")){if(-1!==e.indexOf("ayu")||-1!==e.indexOf("AYU")){var o=e.split("-")[1],r=e.split("-")[2],l=Number(o)-Number(r);return{NW:parseFloat(r).toFixed(3),PKG:parseFloat(l).toFixed(3),GW:parseFloat(o).toFixed(3)}}var s=e.split("-")[0],i=e.split("-")[1],c=Number(s)-Number(i);return{NW:parseFloat(i).toFixed(3),PKG:parseFloat(c).toFixed(3),GW:parseFloat(s).toFixed(3)}}return!1}(e),i=n(e);return t||(o||(r||(s||(i||(l||(a||void 0))))))}}}]);